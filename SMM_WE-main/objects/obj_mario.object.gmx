<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_mario_small_walk</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-8</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>sprite_index = scr_marioidle()
pmeter = 0
if (global.powerup == 3 &amp;&amp; (!instance_exists(obj_cap_mario)))
{
    with (instance_create(x, y, obj_cap_mario))
    {
        cap_invisible = 0
        visible = true
    }
}
if (global.powerup == -82 &amp;&amp; (!instance_exists(obj_mario_pballon)))
{
    with (instance_create(x, (y + 20), obj_mario_pballon))
        visible = true
}
if (instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.fallow_mario == 0)
    obj_levelmanager.y = (y + 32)
direct_turn = 1
yview = (y + 32)
camera_jump = 0
hspd = 1
x_speed = 0
boostme = 0
blend_star = 16777215
flashAlpha = 1
speed_cinta = 0
helice_fly = 0
helice_fly_temp = 0
jump_loaded = 0
airspin = 0
airspin_count = 0
groundpount = 0
jump_type = 0
platform_m = 0
inclown = 0
canhang = 0
canturn = 0
enable_gravity = 1
disablegrav = 0
ygrav = 1
mario_index = "walk"
keys = 0
shake = 0
stuntime = 0
snow = 0
state = 0
direct = 1
holding = 0
turning = 0
fly_cap = 0
modo_vuelo = 0
canfly = 0
fly_high = 3
helmet = 0
jumpnow = 0
s_hen = 0
skidnow = 0
isswim = 0
new_swim = 0
isswimhold = 0
isduck = 0
isduckhold = 0
isup = 0
isuphold = 0
invincible = 0
netsmack = 0
iamkicking = 0
stompstyle = 0
isslip = 0
disablecontrols = 0
isfloating = 0
floatnow = 0
powerupfly = 0
walljump = 0
squirrelpropel = 0
arcon_slide = 0
doublejump = 0
squirrel_fly = 0
firing = 0
caped = 0
wiggle = 0
swimtype = 0
noisy = 0
isflashing = 0
hitpoint = 0
statedelay = 0
can_break_block = 0
frog_jump = 0
alarm[5] = 8
alarm[9] = (24 + random(96))
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(14)
if instance_exists(obj_shake_mario)
{
    with (obj_shake_mario)
        instance_destroy()
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>turning = 0
caped = 0
if (global.powerup != 3)
    exit
if (global.powerup == 3 &amp;&amp; obj_mario.state == 2 &amp;&amp; instance_exists(obj_cap_mario))
    obj_cap_mario.sprite_index = spr_cap_fall
else if (global.powerup == 3 &amp;&amp; obj_mario.state == 1 &amp;&amp; instance_exists(obj_cap_mario) &amp;&amp; obj_mario.hspeed != 0)
    obj_cap_mario.sprite_index = spr_cap_run
else if (global.powerup == 3 &amp;&amp; obj_mario.state == 1 &amp;&amp; instance_exists(obj_cap_mario) &amp;&amp; obj_mario.hspeed == 0)
{
    obj_cap_mario.sprite_index = spr_cap_start_stay
    obj_cap_mario.image_speed = 0.1
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var clown_col, o_fire, hammer;
if (disablecontrols == 0 &amp;&amp; (holding == 0 || (holding == 3 &amp;&amp; global.yoshi == 2)) &amp;&amp; skidnow == 0 &amp;&amp; walljump == 0 &amp;&amp; stompstyle == 0)
{
    if (isduck == 0)
    {
        if (global.powerup == 3 &amp;&amp; global.yoshi == 0)
        {
            clown_col = collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_clown, 0, 0)
            if (clown_col &amp;&amp; clown_col.inmario == 1)
                exit
            else
            {
                audio_stop_sound(snd_spin)
                audio_play_sound(snd_spin, 0, false)
                caped = 1
                alarm[11] = 25
            }
        }
        else if (global.powerup == 2)
        {
            if (instance_number(obj_fireball) &lt; 2)
            {
                clown_col = collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_clown_fire, 0, 0)
                if (clown_col &amp;&amp; clown_col.inmario == 1)
                    exit
                else
                {
                    if instance_exists(obj_brickhelmet)
                        o_fire = obj_fireball_b
                    else
                        o_fire = obj_fireball
                    if (global.apariencia == 3)
                        firing = 20
                    else
                        firing = 9
                    if (global.apariencia == 0)
                    {
                        with (instance_create((x + (8 * direct)), (y + 12), o_fire))
                            hspeed = (4.5 * other.direct)
                    }
                    else
                    {
                        with (instance_create((x + (14 * direct)), (y + 12), o_fire))
                            hspeed = (4.5 * other.direct)
                    }
                }
            }
            else if (stompstyle == 1)
                alarm[10] = 4
        }
        else if (global.powerup == -38)
        {
            if (instance_number(obj_snowball) &lt; 2)
            {
                clown_col = collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_clown_fire, 0, 0)
                if (clown_col &amp;&amp; clown_col.inmario == 1)
                    exit
                else
                {
                    firing = 20
                    with (instance_create((x + (14 * direct)), (y + 12), obj_snowball))
                        hspeed = (2.6 * other.direct)
                }
            }
            else if (stompstyle == 1)
                alarm[10] = 4
        }
        else if (global.powerup == -50 &amp;&amp; instance_number(obj_superball) &lt; 1)
        {
            clown_col = collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_clown_fire, 0, 0)
            if (clown_col &amp;&amp; clown_col.inmario == 1)
                exit
            else
            {
                firing = 9
                if (isswim == 0)
                {
                    with (instance_create(x, (y + 12), obj_superball))
                        hspeed = (4.5 * other.direct)
                }
                else
                {
                    with (instance_create(x, (y + 12), obj_superball))
                        hspeed = (3 * other.direct)
                }
            }
        }
        else if (global.powerup == -39 &amp;&amp; sprite_index != scr_mariojumpstar() &amp;&amp; (!instance_exists(obj_spinner)) &amp;&amp; global.yoshi == 0)
        {
            clown_col = collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_clown, 0, 0)
            if (clown_col &amp;&amp; clown_col.inmario == 1)
                exit
            else
                instance_create(x, y, obj_spinner)
        }
        else if (global.powerup == -46 &amp;&amp; sprite_index != scr_mariojumpstar() &amp;&amp; global.yoshi == 0)
        {
            clown_col = collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_clown_fire, 0, 0)
            if (clown_col &amp;&amp; clown_col.inmario == 1)
                exit
            else if (instance_number(obj_hammer) &lt; 2)
            {
                firing = 9
                if instance_exists(obj_brickhelmet)
                    hammer = obj_hammer_b
                else
                    hammer = obj_hammer
                with (instance_create((x + (14 * direct)), (y + 12), hammer))
                    hspeed = ((abs(other.hspeed) + 1.5) * other.direct)
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="9">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>alarm[9] = (45 + random_range(-15, 15))
if (isswim == 1)
    instance_create(x, bbox_top, obj_bubble)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="8">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var o_fire;
if (holding == 0)
{
    if (global.powerup == 2 &amp;&amp; instance_number(obj_fireball) &lt; 2)
    {
        if instance_exists(obj_brickhelmet)
            o_fire = obj_fireball_b
        else
            o_fire = obj_fireball
        with (instance_create((x + (8 * direct)), (y + 12), o_fire))
            hspeed = -4.5
    }
    else if (global.powerup == -38 &amp;&amp; instance_number(obj_snowball) &lt; 2)
    {
        with (instance_create((x + (8 * direct)), (y + 12), obj_snowball))
            hspeed = -2.6
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var o_fire;
if (holding == 0)
{
    if (global.powerup == 2 &amp;&amp; instance_number(obj_fireball) &lt; 2)
    {
        if instance_exists(obj_brickhelmet)
            o_fire = obj_fireball_b
        else
            o_fire = obj_fireball
        with (instance_create((x + (8 * direct)), (y + 12), o_fire))
            hspeed = 4.5
    }
    else if (global.powerup == -38 &amp;&amp; instance_number(obj_snowball) &lt; 2)
    {
        with (instance_create((x + (8 * direct)), (y + 12), obj_snowball))
            hspeed = 2.6
    }
}
if (stompstyle == 1)
    alarm[8] = 10
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="6">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.apariencia != 3)
    iamkicking = 0
canhang = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (skidnow == 1 &amp;&amp; global.apariencia != 0)
{
    if ((direct == 1 &amp;&amp; state != 4) || (direct == -1 &amp;&amp; state == 4))
    {
        with (instance_create((x + 1), (y + 24), obj_smoke))
        {
            sprite_index = spr_skidsmoke
            depth = -6
        }
    }
    else
    {
        with (instance_create((x - 8), (y + 24), obj_smoke))
        {
            sprite_index = spr_skidsmoke
            depth = -6
        }
    }
}
alarm[5] = 8
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>netsmack = 0
can_break_block = 2
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (!instance_exists(obj_invincibility))
    invincible = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>image_alpha = 1
if (invincible == 1)
    alarm[1] = 6
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (image_alpha == 1)
    image_alpha = 0
else
    image_alpha = 1
alarm[2] = 4
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>camera_jump = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var spd_i;
if instance_exists(obj_levelmanager)
    pmeter = obj_levelmanager.pmeter
if (frog_jump != 0 &amp;&amp; state != 1)
    frog_jump = 0
if (global.powerup == -29 &amp;&amp; isswim == 1)
    isduck = 0
if (isduck == 0)
{
    switch global.powerup
    {
        case 0:
            mask_index = spr_smallmask
            break
        case -77:
            mask_index = spr_megamask
            break
        case -82:
            mask_index = spr_smallmask
            break
        default:
            mask_index = spr_bigmask
    }

    if (global.powerup == 2 || global.powerup == -50 || global.powerup == -46)
    {
        if (firing &gt; 0)
            firing--
    }
    else
        firing = 0
    if (global.powerup == -39)
    {
        if (state == 2)
        {
            if (wiggle &gt; 1)
                wiggle--
            if (wiggle &gt; 12)
                image_index = 3
            else if (wiggle &gt; 8)
                image_index = 2
            else if (wiggle &gt; 4)
                image_index = 1
            else if (wiggle &gt; 1)
                image_index = 2
            else if (wiggle == 1)
                image_index = 1
        }
        else
            wiggle = 0
    }
    else
        wiggle = 0
    if (holding == 0)
    {
        if (state &lt; 2 &amp;&amp; pmeter &gt; 5 &amp;&amp; global.powerup != -29 &amp;&amp; ((direct == 1 &amp;&amp; hspeed &lt; 0 &amp;&amp; keyboard_check(global.derecha)) || (direct == -1 &amp;&amp; hspeed &gt; 0 &amp;&amp; keyboard_check(global.izquierda))))
        {
            sprite_index = scr_marioskid()
            image_speed = 0
            image_index = 0
            if (skidnow == 0)
            {
                skidnow = 1
                if (global.apariencia != 0)
                    audio_play_sound(scr_snd_skid(), 1, true)
            }
        }
        else if (state == 0)
        {
            if (caped &gt; 0)
            {
                if instance_exists(obj_mario_transform2)
                    image_speed = 0
                else
                    image_speed = 0.3
                sprite_index = scr_mariowarp()
            }
            else if (firing &gt; 0)
            {
                image_speed = 0
                if (firing &lt; 6 &amp;&amp; firing &gt; 3)
                    image_index = 1
                else
                {
                    image_index = 0
                    sprite_index = scr_marioshoot()
                }
            }
            else if instance_exists(obj_mario_transform2)
            {
                if (skidnow == 1)
                {
                    sprite_index = scr_marioskid()
                    audio_stop_sound(scr_snd_skid())
                }
                else if (obj_mario_transform2.m_hspeed != 0)
                    sprite_index = scr_mariowalk()
                else
                    sprite_index = scr_marioidle()
            }
            else if (global.powerup == -29 &amp;&amp; isswim == 1)
            {
                sprite_index = scr_marioswim_idle()
                image_speed = 0.15
            }
            else
            {
                sprite_index = scr_marioidle()
                image_speed = 0
                if (isup == 1)
                    sprite_index = scr_marioup()
            }
        }
        else if (state == 1)
        {
            if (caped &gt; 0)
            {
                if instance_exists(obj_mario_transform2)
                    image_speed = 0
                else
                    image_speed = 0.3
                sprite_index = scr_mariowarp()
            }
            else if (firing &gt; 0)
            {
                image_speed = 0
                if (firing &lt; 6 &amp;&amp; firing &gt; 3)
                    image_index = 1
                else
                {
                    image_index = 0
                    sprite_index = scr_marioshoot()
                }
            }
            else if instance_exists(obj_mario_transform2)
            {
                if (skidnow == 1)
                {
                    sprite_index = scr_marioskid()
                    image_speed = 0
                    image_index = 0
                    audio_stop_sound(scr_snd_skid())
                }
                else
                {
                    image_speed = 0
                    if (pmeter &lt; 6)
                        sprite_index = scr_mariowalk()
                    else if (global.apariencia == 0)
                        sprite_index = scr_mariowalk()
                    else
                        sprite_index = scr_mariorun()
                }
            }
            else if (global.powerup == -29)
            {
                if (isswim == 1)
                {
                    sprite_index = scr_marioswim()
                    if (global.key_br == 1)
                        image_speed = (0.1 + (0.1 * global.key_br))
                    else
                        image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                }
                else
                {
                    if (frog_jump == 0)
                    {
                        audio_stop_sound(snd_SMB_smalljump)
                        audio_play_sound(snd_SMB_smalljump, 0, false)
                        frog_jump = 1
                    }
                    if (frog_jump == 1 &amp;&amp; image_index &gt;= 3.75)
                        frog_jump = 0
                    sprite_index = scr_mariowalk()
                    image_speed = abs((hspeed / 10))
                }
            }
            else
            {
                if (abs((hspeed / 5)) &gt; 0.3)
                    spd_i = 0.3
                else
                    spd_i = abs((hspeed / 5))
                image_speed = spd_i
                if (pmeter &lt; 6 || global.apariencia == 0)
                    sprite_index = scr_mariowalk()
                else
                    sprite_index = scr_mariorun()
            }
        }
        else if (state == 2)
        {
            if (isswim == 1)
            {
                if (caped &gt; 0)
                {
                    if instance_exists(obj_mario_transform2)
                        image_speed = 0
                    else
                        image_speed = 0.3
                    sprite_index = scr_mariowarp()
                }
                else if (firing &gt; 0)
                {
                    image_speed = 0
                    if (firing &lt; 6 &amp;&amp; firing &gt; 3)
                        image_index = 1
                    else
                    {
                        image_index = 0
                        sprite_index = scr_marioshoot()
                    }
                }
                else if (global.powerup == -29)
                {
                    if (swimtype == 0)
                    {
                        if (hspeed == 0)
                        {
                            sprite_index = scr_marioswim_idle()
                            image_speed = 0.15
                        }
                        else
                        {
                            sprite_index = scr_marioswim()
                            if (global.key_br == 1)
                                image_speed = (0.1 + (0.1 * global.key_br))
                            else
                                image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                        }
                    }
                    else if (swimtype == 1)
                    {
                        if (x != xprevious || y != yprevious)
                        {
                            sprite_index = scr_marioswim2()
                            if (global.key_br == 1)
                                image_speed = (0.1 + (0.1 * global.key_br))
                            else
                                image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                        }
                        else
                        {
                            sprite_index = scr_marioswim_idle()
                            image_speed = 0.15
                        }
                    }
                    else if (swimtype == 2)
                    {
                        if (x != xprevious || y != yprevious)
                        {
                            sprite_index = scr_marioswim3()
                            if (global.key_br == 1)
                                image_speed = (0.1 + (0.1 * global.key_br))
                            else
                                image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                        }
                        else
                        {
                            sprite_index = scr_marioswim_idle()
                            image_speed = 0.15
                        }
                    }
                }
                else if (noisy == 0)
                {
                    if (sprite_index == scr_marioswim())
                    {
                        if ((global.apariencia == 0 &amp;&amp; image_index &gt;= 4.75) || (global.apariencia != 0 &amp;&amp; image_index &gt;= 2.85))
                        {
                            sprite_index = scr_marioswimhold()
                            image_index = 0
                        }
                        else if (global.apariencia == 0)
                            image_speed = 0.25
                        else
                            image_speed = 0.15
                    }
                    else
                    {
                        sprite_index = scr_marioswimhold()
                        image_speed = 0.15
                    }
                }
            }
            else if (stompstyle == 1)
            {
                if instance_exists(obj_mario_transform2)
                    image_speed = 0
                else
                    image_speed = 0.4
                sprite_index = scr_mariowarp()
            }
            else if (caped &gt; 0)
            {
                if instance_exists(obj_mario_transform2)
                    image_speed = 0
                else
                    image_speed = 0.3
                sprite_index = scr_mariowarp()
            }
            else if (firing &gt; 0)
            {
                image_speed = 0
                if (firing &lt; 6 &amp;&amp; firing &gt; 3)
                    image_index = 1
                else
                    image_index = 0
                sprite_index = scr_marioshoot()
            }
            else if (modo_vuelo == 1)
            {
                if (place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0)
                {
                    if (sprite_index != scr_mario_cap_fly_acender() &amp;&amp; sprite_index != scr_mario_cap_fly_decender() &amp;&amp; sprite_index != scr_mario_cap_fly_acender_decender())
                    {
                        sprite_index = scr_mario_cap_fly()
                        image_speed = 0.2
                    }
                }
                else if (sprite_index != scr_mario_cap_fly_acender())
                {
                    sprite_index = scr_mario_cap_fly()
                    image_speed = 0
                }
            }
            else if (pmeter &lt; 6)
            {
                if (global.apariencia == 1 &amp;&amp; global.powerup != -29 &amp;&amp; global.powerup != 0 &amp;&amp; instance_exists(obj_invincibility))
                {
                    sprite_index = scr_mariojumpstar()
                    image_speed = 0.4
                }
                else
                {
                    sprite_index = scr_mariojump()
                    if (global.powerup == -78)
                        image_speed = 0.2
                    if (global.powerup != -39)
                    {
                        if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
                        {
                            if (global.powerup == -78 &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0)) &amp;&amp; jumpnow != 0 &amp;&amp; s_hen == 1)
                            {
                                audio_play_sound(snd_SMB_hen_jump_fall, 0, false)
                                s_hen = 0
                                sprite_index = scr_mariodrop()
                            }
                            else if (global.apariencia == 0 &amp;&amp; jumpnow == 0)
                            {
                                sprite_index = scr_mariowalk()
                                image_index = 0
                            }
                            else
                                sprite_index = scr_mariodrop()
                        }
                    }
                    else if (wiggle == 0)
                    {
                        image_speed = 0
                        if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
                            image_index = 3
                        else
                            image_index = 0
                    }
                }
            }
            else if (global.apariencia == 1 &amp;&amp; global.powerup != 0 &amp;&amp; global.powerup != -39 &amp;&amp; global.powerup != -29 &amp;&amp; instance_exists(obj_invincibility))
            {
                sprite_index = scr_mariojumpstar()
                image_speed = 0.4
            }
            else if collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0)
            {
                if (global.apariencia == 0 &amp;&amp; jumpnow == 0)
                {
                    sprite_index = scr_mariowalk()
                    image_index = 0
                }
                else
                    sprite_index = scr_mariodrop()
            }
            else
            {
                if (global.apariencia == 0)
                {
                    if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
                    {
                        if (global.powerup == -78 &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0)) &amp;&amp; jumpnow != 0 &amp;&amp; s_hen == 1)
                        {
                            audio_play_sound(snd_SMB_hen_jump_fall, 0, false)
                            s_hen = 0
                            sprite_index = scr_mariodrop()
                        }
                        else
                            sprite_index = scr_mariodrop()
                    }
                    else
                    {
                        sprite_index = scr_mariojump()
                        if (global.powerup == -78)
                            image_speed = 0.2
                    }
                }
                else if (global.powerup == -29)
                {
                    if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
                        sprite_index = scr_mariodrop()
                    else
                        sprite_index = scr_mariojump()
                }
                else
                    sprite_index = scr_mariorunjump()
                if (global.powerup == -39)
                {
                    if (wiggle == 0)
                    {
                        image_speed = 0
                        if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
                            image_index = 0
                        else
                            image_index = 2
                    }
                }
            }
        }
    }
    else
    {
        if (state == 0)
        {
            if (global.powerup == -29 &amp;&amp; isswim == 1)
            {
                sprite_index = scr_marioswim_hold_idle()
                image_speed = 0.15
            }
            else
            {
                image_speed = 0
                image_index = 0.99
            }
        }
        if (state == 1)
        {
            if (turning == 0)
                image_speed = abs((hspeed / 10))
            else
            {
                image_speed = 0
                image_index = 1
            }
        }
        if (state == 2)
        {
            if (turning == 0)
            {
                if (global.powerup == -29 &amp;&amp; isswim == 1)
                {
                    if (swimtype == 0)
                    {
                        if (hspeed == 0)
                        {
                            sprite_index = scr_marioswim_hold_idle()
                            image_speed = 0.15
                        }
                        else
                        {
                            sprite_index = scr_marioswimhold()
                            if (global.key_br == 1)
                                image_speed = (0.1 + (0.1 * global.key_br))
                            else
                                image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                        }
                    }
                    else if (swimtype == 1)
                    {
                        if (x != xprevious || y != yprevious)
                        {
                            sprite_index = scr_marioswimhold()
                            if (global.key_br == 1)
                                image_speed = (0.1 + (0.1 * global.key_br))
                            else
                                image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                        }
                        else
                        {
                            sprite_index = scr_marioswim_hold_idle()
                            image_speed = 0.15
                        }
                    }
                    else if (swimtype == 2)
                    {
                        if (x != xprevious || y != yprevious)
                        {
                            sprite_index = scr_marioswimhold()
                            if (global.key_br == 1)
                                image_speed = (0.1 + (0.1 * global.key_br))
                            else
                                image_speed = (0.1 + (0.1 * keyboard_check(global.lanzar_agarrar)))
                        }
                        else
                        {
                            sprite_index = scr_marioswim_hold_idle()
                            image_speed = 0.15
                        }
                    }
                }
                else if (isswim == 1 &amp;&amp; (holding == 2 || holding == 1) &amp;&amp; global.apariencia != 0)
                {
                    image_speed = 0
                    if (vspeed &gt; 0)
                        image_speed = 0.16
                    else
                        image_index = 0
                }
                else if (holding == 2 &amp;&amp; stompstyle == 1 &amp;&amp; isswim == 0)
                    image_speed = 0.4
                else
                {
                    image_speed = 0
                    if (global.powerup != -39)
                    {
                        if (global.powerup != 0 &amp;&amp; global.apariencia == 1)
                            image_index = 2
                        else
                            image_index = 1
                    }
                    else if (wiggle == 0)
                    {
                        if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
                            image_index = 2
                        else
                            image_index = 1
                    }
                }
            }
            else
            {
                image_speed = 0
                image_index = 1
            }
        }
        if (turning == 1)
            sprite_index = scr_mariowarp()
        else if (holding == 2 &amp;&amp; isswim == 1 &amp;&amp; gravity != 0 &amp;&amp; global.apariencia != 0 &amp;&amp; global.powerup != -29)
            sprite_index = scr_marioswimhold()
        else if (holding == 2 &amp;&amp; stompstyle == 1 &amp;&amp; isswim == 0)
            sprite_index = scr_mariowarp()
        else if (holding == 1 || holding == 2)
        {
            if (global.apariencia == 1 &amp;&amp; global.powerup == -39 &amp;&amp; vspeed != 0)
                sprite_index = scr_mariojumphold()
            else if (global.powerup == -29 &amp;&amp; isswim == 0)
            {
                if (pmeter &gt; 5 &amp;&amp; state &lt; 2)
                    sprite_index = scr_mariorun()
                else
                    sprite_index = scr_mariohold()
            }
            else if (global.powerup == -29 &amp;&amp; isswim == 1 &amp;&amp; state == 1)
                sprite_index = scr_marioswimhold()
            else if (global.powerup != -29)
                sprite_index = scr_mariohold()
            if (isuphold == 1 &amp;&amp; jumpnow == 0 &amp;&amp; state == 0)
                sprite_index = scr_mariouphold()
        }
    }
    if (state == 3)
    {
        sprite_index = scr_marioclimb()
        if (global.apariencia &lt; 2)
        {
            if (speed == 0)
                image_speed = 0
            else
                image_speed = 0.15
        }
        else if (global.apariencia == 2)
        {
            if (speed == 0)
            {
                image_speed = 0
                image_index = 2
            }
            else
            {
                image_speed = 0.25
                if (image_index &gt; 1.8)
                    image_index = 0
            }
        }
    }
    else if (state == 4)
    {
        sprite_index = scr_marioskid()
        if (skidnow == 0 &amp;&amp; global.apariencia != 0)
        {
            skidnow = 1
            audio_play_sound(scr_snd_skid(), 1, true)
        }
    }
    if (iamkicking == 1 &amp;&amp; stompstyle == 0 &amp;&amp; (global.apariencia != 0 || global.powerup == -80))
    {
        if (global.powerup == -29 &amp;&amp; isswim == 1)
        {
        }
        else
            sprite_index = scr_mariokick()
    }
}
else if (isduck == 1)
{
    switch global.powerup
    {
        case 0:
            mask_index = spr_smallduckmask
            break
        case -77:
            if (instance_exists(obj_kuriboshoe) || instance_exists(obj_kuriboshoe2))
            {
                mask_index = spr_megamask
                break
            }
            else
                mask_index = spr_mega_mask_duck
        default:
            mask_index = spr_smallmask
    }

    if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; (global.apariencia != 0 || (global.apariencia == 0 &amp;&amp; vspeed == 0)))
        direct = 1
    else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; (global.apariencia != 0 || (global.apariencia == 0 &amp;&amp; vspeed == 0)))
        direct = -1
    if (global.powerup == -39)
    {
        if (state == 2)
        {
            if (wiggle &gt; 1)
                wiggle--
            if (wiggle &gt; 12)
                image_index = 3
            else if (wiggle &gt; 8)
                image_index = 2
            else if (wiggle &gt; 4)
                image_index = 1
            else if (wiggle &gt; 1)
                image_index = 2
            else if (wiggle == 1)
                image_index = 1
        }
        else
            wiggle = 0
    }
    else
        wiggle = 0
    if (iamkicking == 1 &amp;&amp; global.powerup == -80)
        sprite_index = scr_mariokick()
    else if (isduckhold == 1)
    {
        sprite_index = scr_marioduckhold()
        if (jump_loaded == 60)
            image_speed = 0.3
        else
        {
            image_speed = 0
            image_index = 0
        }
    }
    else
    {
        sprite_index = scr_marioduck()
        if (wiggle == 0)
        {
            if ((place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0 &amp;&amp; global.powerup == -39) || (collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0) &amp;&amp; global.powerup == -39))
                image_index = 2
            else if (jump_loaded == 60)
                image_speed = 0.3
            else
            {
                image_speed = 0
                image_index = 0
            }
        }
    }
}
if (sprite_index != scr_marioskid() &amp;&amp; skidnow == 1 &amp;&amp; (!instance_exists(obj_mario_transform2)))
{
    audio_stop_sound(scr_snd_skid())
    skidnow = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var solidtop, solidphy, b_drybones, enemigos_solid, col_one_right, col_one_left, one_2, col_one_bottom, block_col, rock_parent, brick_helmet;
if ((global.modo_noche == 1 &amp;&amp; global.bg_level == "snow") || collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_block_ice, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_icecoin, 0, 0))
    snow = 1
else
    snow = 0
if ((collision_rectangle(bbox_left, (bbox_bottom - 5), bbox_right, (bbox_bottom + 5), obj_platform_parent, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom - 5), bbox_right, (bbox_bottom + 5), obj_block_pow_hold, 0, 0)) &amp;&amp; state &lt; 2)
    platform_m = 1
else
    platform_m = 0
if (global.yoshi == 0)
{
    if instance_exists(obj_helmet)
    {
        if (collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom + 1), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom + 1), obj_pinchos, 0, 0))
            event_user(0)
    }
    else if (collision_rectangle((bbox_left - 1), (bbox_top - 1), (bbox_right + 1), (bbox_bottom + 1), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), (bbox_top - 1), (bbox_right + 1), (bbox_bottom + 1), obj_pinchos, 0, 0))
        event_user(0)
}
else if (!instance_exists(obj_helmet))
{
    if (collision_rectangle((bbox_left - 1), bbox_top, (bbox_right + 1), (bbox_bottom - 4), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), bbox_top, (bbox_right + 1), (bbox_bottom - 4), obj_pinchos, 0, 0))
        event_user(0)
}
else if (collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom - 4), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom - 4), obj_pinchos, 0, 0))
    event_user(0)
if (boostme &gt; 0)
{
    boostme--
    if (abs(hspeed) &lt; hspeedmax)
        boostme = 0
}
if (vspeed &gt;= 0)
{
    solidtop = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_solidtop, 0, 0)
    solidphy = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_physicssolid, 0, 0)
    b_drybones = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_lava_water_drybones, 0, 0)
    if (solidtop &amp;&amp; bbox_bottom &lt; (solidtop.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (solidtop.y - 1), obj_solid, 1, 0)))
    {
        if (sprite_index == scr_mario_cap_fly_decender() &amp;&amp; image_index == 2)
            event_user(8)
        if (collision_rectangle(bbox_left, (bbox_bottom + 2), bbox_right, ((bbox_bottom + vspeed) + 2), obj_rockparent, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 2), bbox_right, ((bbox_bottom + vspeed) + 2), obj_blockparent, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 2), bbox_right, ((bbox_bottom + vspeed) + 2), obj_block_pow_hold, 0, 0))
        {
            if (jumpnow != 0 &amp;&amp; can_break_block == 0 &amp;&amp; vspeed &gt; 0)
                can_break_block = 1
            if (can_break_block == 2)
                can_break_block = 0
        }
        else if (can_break_block == 2)
            can_break_block = 0
        y = (solidtop.y - 32)
        vspeed = 0
        gravity = 0
        event_user(15)
    }
    if (solidphy &amp;&amp; bbox_bottom &lt; (solidphy.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (solidphy.y - 1), obj_solid, 1, 0)))
    {
        if (sprite_index == scr_mario_cap_fly_decender() &amp;&amp; image_index == 2)
            event_user(8)
        y = (solidphy.y - 32)
        vspeed = 0
        gravity = 0
        event_user(15)
    }
    if (b_drybones &amp;&amp; bbox_bottom &lt; (b_drybones.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (b_drybones.y - 1), obj_solid, 1, 0)) &amp;&amp; (instance_exists(obj_kuribo_drybones) || (global.powerup == -29 &amp;&amp; obj_mario.pmeter &gt; 5 &amp;&amp; obj_mario.holding == 2)))
    {
        y = (b_drybones.y - 32)
        vspeed = 0
        gravity = 0
        event_user(15)
    }
    enemigos_solid = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_enemyparent, 0, 0)
    if (enemigos_solid &amp;&amp; bbox_bottom &lt; (enemigos_solid.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (enemigos_solid.y - 1), obj_solid, 1, 0)) &amp;&amp; instance_exists(obj_kuribo_drybones))
    {
        y = ceil(((enemigos_solid.bbox_top - 32) - enemigos_solid.vspeed))
        vspeed = 0
        gravity = 0
        event_user(15)
    }
}
if (stuntime &gt; 0)
{
    if (stuntime == 1)
    {
        stuntime = 0
        shake = 0
        disablecontrols = 0
        if instance_exists(obj_shake_mario)
        {
            with (obj_shake_mario)
                instance_destroy()
        }
    }
    stuntime--
    shake = (-shake)
}
if (isswim == 0)
{
    switch state
    {
        case 3:
            event_user(4)
            break
        default:
            event_user(2)
    }

}
else
{
    switch state
    {
        case 3:
            event_user(4)
            break
        default:
            event_user(3)
    }

}
if collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_solid, 1, 0)
{
    if (hspeed &gt; 0)
        hspeed = 0
    while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_solid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_solid, 0, 0)))
        x--
}
else if collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0)
{
    if (hspeed &lt; 0)
        hspeed = 0
    while (collision_rectangle(bbox_left, (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_solid, 0, 0)))
        x++
}
if collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0)
{
    if (hspeed &gt; 0)
        hspeed = 0
    if ((!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_physicssolid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_physicssolid, 0, 0)))
            x--
    }
}
else if collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, 1, 0)
{
    if (hspeed &lt; 0)
        hspeed = 0
    if ((!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_left, (bbox_top + 4), (bbox_left + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_physicssolid, 0, 0)))
            x++
    }
}
if collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_bullebill_base, 1, 0)
{
    if (hspeed &gt; 0)
        hspeed = 0
    if ((!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bullebill_base, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_bullebill_base, 0, 0)))
            x--
    }
}
else if collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0)
{
    if (hspeed &lt; 0)
        hspeed = 0
    if ((!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_left, (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_solidphy, 0, 0)))
            x++
    }
}
col_one_right = collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_onewaygate_right, 1, 0)
col_one_left = collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_onewaygate_left, 1, 0)
if col_one_right
{
    if (hspeed &lt; 0)
    {
        hspeed = 0
        with (col_one_right)
        {
            rot = 1
            event_user(0)
        }
    }
    while (collision_rectangle(bbox_left, (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_onewaygate_right, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_onewaygate_right, 0, 0)))
        x++
}
if col_one_left
{
    if (hspeed &gt; 0)
    {
        hspeed = 0
        with (col_one_left)
        {
            rot = 1
            event_user(0)
        }
    }
    while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_onewaygate_left, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_onewaygate_left, 0, 0)))
        x--
}
pow = collision_rectangle((bbox_left + 1), (bbox_top - 2), (bbox_right - 1), bbox_top, obj_block_pow_hold, 1, 0)
if (vspeed &lt; 0 &amp;&amp; pow &amp;&amp; pow.held == 0 &amp;&amp; pow.inmune == 0 &amp;&amp; (pow.y + 16) &lt; bbox_top)
{
    vspeed = 0
    with (pow)
    {
        explode = 1
        event_user(6)
    }
}
pswitch = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_pswitch, 1, 0)
if (pswitch &amp;&amp; pswitch.inmune == 0 &amp;&amp; pswitch.inup == 1)
{
    with (pswitch)
        event_user(6)
}
one_2 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)
if (vspeed &lt; 0 &amp;&amp; (collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_solid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_physicssolid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_bullebill_base, 1, 0) || (pswitch &amp;&amp; pswitch.held == 0 &amp;&amp; (pswitch.y + 16) &lt; bbox_top) || (one_2 &amp;&amp; (bbox_top + 5) &gt;= one_2.bbox_bottom)))
{
    if (state &gt; 1)
    {
        while collision_rectangle(bbox_left, (bbox_top + 1), bbox_right, (bbox_top + 1), obj_solid, 1, 0)
            y++
    }
    vspeed = 0
    col_one_bottom = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)
    if col_one_bottom
    {
        with (col_one_bottom)
        {
            rot = 1
            event_user(0)
        }
    }
    else if (!audio_is_playing(scr_snd_bump()))
    {
        audio_stop_sound(scr_jump())
        audio_play_sound(scr_snd_bump(), 0, false)
    }
    block_col = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_blockparent, 1, 0)
    rock_parent = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_rockparent, 1, 0)
    if (instance_exists(obj_helmet_spiny) &amp;&amp; rock_parent &amp;&amp; rock_parent.vspeed == 0)
    {
        with (rock_parent)
            alarm[0] = 1
    }
    if ((instance_exists(obj_helmet_spiny) || global.powerup == -77) &amp;&amp; block_col &amp;&amp; block_col.vspeed == 0 &amp;&amp; block_col.object_index != obj_onoffblock &amp;&amp; block_col.object_index != obj_noteblock &amp;&amp; block_col.object_index != obj_musicblock &amp;&amp; block_col.object_index != obj_noteblock_s)
    {
        with (block_col)
            alarm[2] = 1
    }
    if (block_col &amp;&amp; block_col.vspeed == 0 &amp;&amp; block_col.object_index == obj_flipblock &amp;&amp; global.apariencia != 2 &amp;&amp; (global.powerup != 0 || (global.powerup == 0 &amp;&amp; instance_exists(obj_helmet))))
    {
        with (block_col)
            alarm[2] = 1
    }
    else if (block_col &amp;&amp; block_col.object_index == obj_onoffblock &amp;&amp; block_col.ready == 0)
    {
        with (block_col)
            event_user(1)
    }
    else if (block_col &amp;&amp; block_col.object_index == obj_block_gold &amp;&amp; block_col.ready == 0)
    {
        with (block_col)
        {
            if (other.helmet == 0)
            {
                brick_helmet = instance_create(obj_mario.x, (obj_mario.y + 8), obj_brickhelmet)
                brick_helmet.limit_coins = (limit_coins + 100)
                obj_mario.helmet = 1
                instance_destroy()
            }
            else
            {
                ready = 1
                vspeed = -2
                alarm[0] = 4
                event_user(0)
            }
        }
    }
    else if (block_col &amp;&amp; (global.powerup != -77 || block_col.object_index == obj_noteblock || block_col.object_index == obj_musicblock || block_col.object_index == obj_noteblock_s))
    {
        if (block_col.ready == 0)
        {
            with (block_col)
            {
                ready = 1
                vspeed = -2
                if (object_index == obj_noteblock || object_index == obj_musicblock || object_index == obj_noteblock_s)
                    alarm[0] = 7
                else
                    alarm[0] = 4
                event_user(0)
            }
        }
    }
    if (noisy == 0 &amp;&amp; state &lt; 3 &amp;&amp; vspeed &lt; 0)
    {
        jumpnow = 2
        audio_stop_sound(scr_snd_bump())
        audio_stop_sound(scr_jump())
        audio_play_sound(scr_snd_bump(), 0, false)
    }
}
if (state &lt; 3)
{
    if (state != 2 &amp;&amp; disablecontrols == 0)
    {
        if (keyboard_check(global.abajo) &amp;&amp; (holding == 0 || holding == 3) &amp;&amp; noisy == 0)
            isduck = 1
        else if (keyboard_check(global.abajo) &amp;&amp; holding == 2 &amp;&amp; noisy == 0 &amp;&amp; global.apariencia == 2)
        {
            isduck = 1
            isduckhold = 1
        }
        else if ((!keyboard_check(global.abajo)) &amp;&amp; (collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_solid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_physicssolid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_bullebill_base, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 12), bbox_right, bbox_top, obj_solidphy, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 16), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)) &amp;&amp; global.powerup != 0 &amp;&amp; isduck == 1)
            isduck = 1
        else
        {
            isduck = 0
            isduckhold = 0
        }
        if (keyboard_check(global.arriba) &amp;&amp; holding &lt; 3 &amp;&amp; noisy == 0 &amp;&amp; global.apariencia == 2)
        {
            isup = 1
            if (holding == 2)
                isuphold = 1
        }
        else if (!keyboard_check(global.arriba))
        {
            isup = 0
            isuphold = 0
        }
    }
    else if (state == 2 &amp;&amp; disablecontrols == 0)
    {
        if ((!keyboard_check(global.abajo)) &amp;&amp; isduck == 1 &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_bullebill_base, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 12), bbox_right, bbox_top, obj_solidphy, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 16), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)) &amp;&amp; vspeed &gt; 0)
        {
            isduck = 0
            isduckhold = 0
        }
        else if (isduck == 1 &amp;&amp; holding == 2 &amp;&amp; noisy == 0 &amp;&amp; global.apariencia == 2)
            isduckhold = 1
    }
    if (keyboard_check_pressed(global.lanzar_agarrar) &amp;&amp; instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.barrier == 0)
        alarm[10] = 1
}
else
    isduck = 0
if (isswim == 0 &amp;&amp; (global.bg_level == "underwater" || (global.bg_level == "castle" &amp;&amp; global.modo_noche == 1) || (instance_exists(obj_lava_water) &amp;&amp; global.bg_level == "forest" &amp;&amp; global.modo_noche == 0 &amp;&amp; (y + 18) &gt;= obj_lava_water.y) || (instance_exists(obj_lava_water) &amp;&amp; global.bg_level == "beach" &amp;&amp; (y + 18) &gt;= obj_lava_water.y)))
{
    if (holding == 2 &amp;&amp; global.apariencia == 2)
        isswimhold = 1
    isswim = 1
    if (instance_exists(obj_lava_water) &amp;&amp; (bbox_bottom - 8) &gt; (obj_lava_water.y - 12) &amp;&amp; global.apariencia != 0)
        instance_create(x, (obj_lava_water.y - 26), obj_splash_agua)
    if (state &gt; 2)
        state = 2
}
switch global.bg_level
{
    case "underwater":
        if (instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.camlock == 1)
        {
            if (y &lt; (view_yview[0] - 16))
                y = (view_yview[0] - 16)
        }
        else if (y &lt; -16)
            y = -16
        break
    case "castle":
        if (global.modo_noche == 1 &amp;&amp; instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.camlock == 1)
        {
            if (y &lt; (view_yview[0] - 16))
                y = (view_yview[0] - 16)
        }
        else if (y &lt; -16)
            y = -16
        break
    default:
        if (instance_exists(obj_mario_pballon) &amp;&amp; instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.camlock == 1)
        {
            if (obj_mario_pballon.y &lt; view_yview[0])
                obj_mario_pballon.y = view_yview[0]
            break
        }
        else if (y &lt; -96)
            y = -96
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="25">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>modo_vuelo = 0
stompstyle = 0
airspin = 0
airspin_count = 0
helice_fly = 0
helice_fly_temp = 0
if (jumpnow != 0)
    jumpnow_temp = 1
jumpnow = 0
doublejump = 0
arcon_slide = 0
squirrel_fly = 0
hitpoint = 0
canfly = 0
walljump = 0
jump_type = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="24">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (skidnow == 1)
    audio_stop_sound(scr_snd_skid())
if (noisy == 1)
    audio_stop_sound(scr_swim())
audio_stop_sound(snd_NSMBU_desllizarse_walljump)
audio_stop_sound(snd_NSMBU_helice_planear)
audio_stop_sound(snd_NSMBU_squirrel_plan)
audio_stop_sound(snd_NSMBU_vine_up)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="18">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>audio_play_sound(snd_thwomp_original, 0, false)
if instance_exists(obj_levelmanager)
{
    with (obj_levelmanager)
        alarm[11] = 1
}
if instance_exists(obj_enemyparent)
{
    with (obj_enemyparent)
    {
        if (vspeed == 0 &amp;&amp; hardness &lt; 99 &amp;&amp; object_index != obj_grinder &amp;&amp; x &lt; (view_xview[0] + 404) &amp;&amp; x &gt; (view_xview[0] - 20) &amp;&amp; y &gt; (view_yview[0] - 20) &amp;&amp; y &lt; (view_yview[0] + 236))
        {
            dead_h = 1
            event_user(0)
        }
    }
}
if instance_exists(obj_boomboom)
{
    with (obj_boomboom)
    {
        if (vspeed == 0 &amp;&amp; x &lt; (view_xview[0] + 404) &amp;&amp; x &gt; (view_xview[0] - 20) &amp;&amp; y &gt; (view_yview[0] - 20) &amp;&amp; y &lt; (view_yview[0] + 236))
        {
            dead_h = 1
            event_user(0)
        }
    }
}
if instance_exists(obj_muncher)
{
    with (obj_muncher)
    {
        if (vspeed == 0 &amp;&amp; x &lt; (view_xview[0] + 404) &amp;&amp; x &gt; (view_xview[0] - 20) &amp;&amp; y &gt; (view_yview[0] - 20) &amp;&amp; y &lt; (view_yview[0] + 236))
        {
            dead_h = 1
            event_user(0)
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="17">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>iamkicking = 1
image_index = 0
if (global.apariencia != 3)
    alarm[6] = 16
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="16">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (invincible != -1)
{
    invincible = 1
    alarm[1] = 1
    alarm[3] = 120
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="14">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var liana_right, liana_left;
if (disablecontrols == 0)
{
    if (global.apariencia == 0)
    {
        jumpnow = 0
        if keyboard_check_pressed(global.derecha)
        {
            liana_right = collision_point((x + 16), (y + 18), obj_climb, 0, 0)
            if (direct == -1 &amp;&amp; liana_right &amp;&amp; (!collision_point((x + 16), (y + 18), obj_solid, 0, 0)) &amp;&amp; (!collision_point((x + 16), (y + 18), obj_physicssolid, 0, 0)) &amp;&amp; (!collision_point((x + 16), (y + 18), obj_solidphy, 0, 0)) &amp;&amp; (!collision_point((x + 16), (y + 18), obj_bullebill_base, 0, 0)) &amp;&amp; (!collision_point((x + 16), (y + 18), obj_onewaygate_left, 0, 0)))
            {
                x = (liana_right.x + 8)
                direct = 1
            }
            else
                direct = -1
        }
        else if keyboard_check_pressed(global.izquierda)
        {
            liana_left = collision_point((x - 16), (y + 18), obj_climb, 0, 0)
            if (direct == 1 &amp;&amp; liana_left &amp;&amp; (!collision_point((x - 16), (y + 18), obj_solid, 0, 0)) &amp;&amp; (!collision_point((x - 16), (y + 18), obj_physicssolid, 0, 0)) &amp;&amp; (!collision_point((x - 16), (y + 18), obj_solidphy, 0, 0)) &amp;&amp; (!collision_point((x - 16), (y + 18), obj_bullebill_base, 0, 0)) &amp;&amp; (!collision_point((x - 16), (y + 18), obj_onewaygate_right, 0, 0)))
            {
                x = (liana_left.x + 8)
                direct = -1
            }
            else
                direct = 1
        }
        if (keyboard_check(global.arriba) &amp;&amp; (!keyboard_check(global.abajo)))
        {
            if (!collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_top, obj_climb, 0, 0))
                vspeed = 0
            else if keyboard_check(global.lanzar_agarrar)
                vspeed = -1.5
            else
                vspeed = -1
        }
        else if (keyboard_check(global.abajo) &amp;&amp; (!keyboard_check(global.arriba)))
        {
            if keyboard_check(global.lanzar_agarrar)
                vspeed = 1.5
            else
                vspeed = 1
            if (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_physicssolid, 0, 0))
            {
                state = 0
                jumpnow = 0
            }
        }
        else
            vspeed = 0
        if (keyboard_check_pressed(global.saltar) || keyboard_check_pressed(global.saltar_spin))
        {
            audio_play_sound(scr_jump(), 0, false)
            state = 2
            jumpnow = 1
            if (isswim == 1)
                vspeed = -1.8
            else
                vspeed = -3.75
        }
        if (!collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0))
        {
            if (vspeed &lt; 0)
                vspeed = 0
            else
                state = 2
        }
    }
    else
    {
        if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)))
        {
            hspeed += 0.15
            if keyboard_check(global.lanzar_agarrar)
            {
                if (hspeed &gt; 1.5)
                    hspeed = 1.5
            }
            else if (hspeed &gt; 1)
                hspeed = 1
            direct = 1
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)))
        {
            hspeed += -0.15
            if keyboard_check(global.lanzar_agarrar)
            {
                if (hspeed &lt; -1.5)
                    hspeed = -1.5
            }
            else if (hspeed &lt; -1)
                hspeed = -1
            direct = -1
        }
        else
            hspeed = 0
        if (keyboard_check(global.arriba) &amp;&amp; (!keyboard_check(global.abajo)))
        {
            if (!collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, (bbox_top - 1), obj_solid, 0, 0))
            {
                if (!collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_top, obj_climb, 0, 0))
                    vspeed = 0
                else
                {
                    vspeed += -0.15
                    if keyboard_check(global.lanzar_agarrar)
                    {
                        if (vspeed &lt; -1.5)
                            vspeed = -1.5
                    }
                    else if (vspeed &lt; -1)
                        vspeed = -1
                }
            }
        }
        else if (keyboard_check(global.abajo) &amp;&amp; (!keyboard_check(global.arriba)))
        {
            vspeed += 0.15
            if keyboard_check(global.lanzar_agarrar)
            {
                if (vspeed &gt; 1.5)
                    vspeed = 1.5
            }
            else if (vspeed &gt; 1)
                vspeed = 1
            if collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0)
            {
                state = 0
                jumpnow = 0
            }
        }
        else
            vspeed = 0
        if (keyboard_check_pressed(global.saltar) || keyboard_check_pressed(global.saltar_spin))
        {
            if (isswim == 1)
                vspeed = -1.8
            else
                vspeed = -3.75
            audio_play_sound(scr_jump(), 0, false)
            jumpnow = 1
            state = 2
        }
        if (!collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0))
            state = 2
    }
}
else
    speed = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var climb1;
if (gravity == 0 &amp;&amp; collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0))
{
    if (vspeed &gt;= 0 &amp;&amp; (!instance_exists(obj_mario_transform2)))
    {
        statedelay = 0
        if (hspeed == 0)
            state = 0
        else
            state = 1
    }
    else if (vspeed &lt; 0)
        state = 2
    if (groundpount == 1)
        groundpount = 0
}
else
{
    statedelay++
    if (statedelay &gt; 4)
        state = 2
    gravity = 0.03
}
if (global.powerup == -29)
{
    gravity = 0
    if (keyboard_check(global.lanzar_agarrar) || global.key_br == 1)
        hspeedmax = 2
    else
        hspeedmax = 1
    if (keyboard_check(global.izquierda) &amp;&amp; isduck == 0 &amp;&amp; (!keyboard_check(global.derecha)))
    {
        hspeed += -0.2
        direct = -1
        swimtype = 0
        if (image_index &gt; 1 &amp;&amp; image_index &lt; 1.5)
        {
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
        }
    }
    else if (keyboard_check(global.derecha) &amp;&amp; isduck == 0 &amp;&amp; (!keyboard_check(global.izquierda)))
    {
        hspeed += 0.2
        direct = 1
        swimtype = 0
        if (image_index &gt; 1 &amp;&amp; image_index &lt; 1.5)
        {
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
        }
    }
    else
    {
        hspeed = (max(0, (abs(hspeed) - 0.2)) * sign(hspeed))
        if (hspeed &lt; 0.2 &amp;&amp; hspeed &gt; -0.2)
            hspeed = 0
    }
    if keyboard_check(global.arriba)
    {
        vspeed += -0.2
        if (hspeed == 0)
            swimtype = 1
        if (image_index &gt; 1 &amp;&amp; image_index &lt; 1.5)
        {
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
        }
    }
    else if keyboard_check(global.abajo)
    {
        if (hspeed == 0)
            swimtype = 2
        if collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0)
            vspeed = 0
        else
            vspeed += 0.2
        if (image_index &gt; 1 &amp;&amp; image_index &lt; 1.5)
        {
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
        }
    }
    else
    {
        vspeed = (max(0, (abs(vspeed) - 0.2)) * sign(vspeed))
        if (vspeed &lt; 0.2 &amp;&amp; vspeed &gt; -0.2)
            vspeed = 0
    }
    if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; global.yoshi &gt; 0)
    {
        vspeed = -2
        audio_play_sound(scr_swim(), 0, false)
        state = 2
        isduck = 0
        global.yoshi = 0
        holding = 0
        if instance_exists(obj_kuriboshoe)
        {
            with (obj_kuriboshoe)
                event_user(0)
        }
    }
    if (hspeed &gt; hspeedmax)
        hspeed = hspeedmax
    if (hspeed &lt; (-hspeedmax))
        hspeed = (-hspeedmax)
    if (vspeed &gt; hspeedmax)
        vspeed = hspeedmax
    if (vspeed &lt; (-hspeedmax))
        vspeed = (-hspeedmax)
}
else
{
    if (holding == 0 || holding == 3)
    {
        if (vspeed &gt; 1)
            vspeed = 1
        if (vspeed &lt; -1.5)
            vspeed = -1.5
        if (keyboard_check_pressed(global.saltar) &amp;&amp; disablecontrols == 0)
        {
            if (state &lt; 2)
                vspeed = -1
            else if (vspeed &gt; 0)
                vspeed = (-(vspeed + 0.18))
            else
                vspeed -= 0.6
            if (sprite_index != scr_marioswim())
                image_index = 0
            sprite_index = scr_marioswim()
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
            state = 2
            isduck = 0
            isduckhold = 0
        }
        if (keyboard_check_released(global.saltar) &amp;&amp; new_swim == 1)
        {
            new_swim = 0
            sprite_index = scr_NSMBU_swim()
            image_index = 8
        }
        if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; global.yoshi &gt; 0)
        {
            vspeed = -1
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
            state = 2
            isduck = 0
            isduckhold = 0
            global.yoshi = 0
            holding = 0
            if instance_exists(obj_yoshi2)
            {
                with (obj_yoshi2)
                    event_user(1)
            }
            if instance_exists(obj_kuriboshoe)
            {
                stompstyle = 0
                with (obj_kuriboshoe)
                    event_user(0)
            }
        }
        if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed += 0.05
            direct = 1
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed -= 0.05
            direct = -1
        }
        else
        {
            if (hspeed &gt; 0)
                hspeed -= 0.05
            if (hspeed &lt; 0)
                hspeed += 0.05
            if (abs(hspeed) &lt; 0.05)
                hspeed = 0
        }
    }
    else
    {
        vspeed -= 0.5
        if (vspeed &lt; -1)
            vspeed = -1
        if (vspeed &gt; 1)
            vspeed = 1
        if (keyboard_check_pressed(global.abajo) &amp;&amp; disablecontrols == 0)
        {
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
        }
        if (keyboard_check(global.abajo) &amp;&amp; disablecontrols == 0)
        {
            if (vspeed &lt; 0)
                vspeed = ((-vspeed) + 0.18)
            else
                vspeed += 0.6
        }
        if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed += 0.05
            direct = 1
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed -= 0.05
            direct = -1
        }
        else if (direct == 1)
        {
            hspeed += 0.05
            if (hspeed &gt; 0.5)
                hspeed = 0.5
        }
        else
        {
            hspeed -= 0.05
            if (hspeed &lt; -0.5)
                hspeed = -0.5
        }
    }
    if (state == 2)
    {
        if (hspeed &gt; 1)
            hspeed = 1
        if (hspeed &lt; -1)
            hspeed = -1
    }
    else
    {
        if (hspeed &gt; 0.5)
            hspeed = 0.5
        if (hspeed &lt; -0.5)
            hspeed = -0.5
    }
}
if (noisy == 1)
{
    noisy = 0
    audio_stop_sound(scr_swim())
}
if (global.apariencia == 0)
{
    climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
    if (climb1 &amp;&amp; (((y + 19) &gt; climb1.y &amp;&amp; climb1.object_index == obj_vine_green &amp;&amp; climb1.image_index == 0) || climb1.object_index != obj_vine_green || climb1.image_index != 0) &amp;&amp; global.yoshi == 0 &amp;&amp; isduck == 0 &amp;&amp; (keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; state == 2)) &amp;&amp; disablecontrols == 0)
    {
        if (hspeed &gt; 0)
            direct = 1
        else if (hspeed &lt; 0)
            direct = -1
        x = (climb1.x + 8)
        state = 3
        speed = 0
        gravity = 0
        canhang = 1
        alarm[6] = 8
    }
}
else
{
    climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
    if (climb1 &amp;&amp; (((y + 19) &gt; climb1.y &amp;&amp; climb1.object_index == obj_vine_green &amp;&amp; climb1.image_index == 0) || climb1.object_index != obj_vine_green || climb1.image_index != 0) &amp;&amp; global.yoshi == 0 &amp;&amp; isduck == 0 &amp;&amp; (keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; state == 2)) &amp;&amp; holding == 0 &amp;&amp; disablecontrols == 0)
    {
        state = 3
        gravity = 0
        speed = 0
    }
}
if (instance_exists(obj_lava_water) &amp;&amp; ((global.bg_level == "forest" &amp;&amp; global.modo_noche == 0) || global.bg_level == "beach") &amp;&amp; (y + 16) &lt;= (obj_lava_water.y - 4))
{
    isswim = 0
    if place_meeting(x, (y + 16), obj_lava_water)
    {
        if (global.apariencia != 0 &amp;&amp; vspeed &gt; 0)
            instance_create(x, (obj_lava_water.y - 26), obj_splash_agua)
        if keyboard_check(global.saltar)
        {
            vspeed = -4.125
            jumpnow = 1
            if (global.apariencia != 0)
                instance_create(x, (obj_lava_water.y - 26), obj_splash_agua)
        }
    }
    if (noisy == 1)
    {
        noisy = 0
        audio_stop_sound(scr_swim())
    }
}
if (global.yoshi != 2)
    stompstyle = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var climb1;
if (gravity == 0 &amp;&amp; (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_physicssolid, 0, 0) || (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_lava_water_drybones, 0, 0) &amp;&amp; (instance_exists(obj_kuribo_drybones) || (global.powerup == -29 &amp;&amp; obj_mario.pmeter &gt; 5 &amp;&amp; obj_mario.holding == 2)))))
{
    if (vspeed &gt;= 0 &amp;&amp; (!instance_exists(obj_mario_transform2)))
    {
        statedelay = 0
        if (hspeed == 0)
            state = 0
        else
            state = 1
        yview = (y + 32)
    }
    else if (vspeed &lt; 0)
        state = 2
}
else
{
    statedelay++
    if (statedelay &gt; 4)
        state = 2
}
if (vspeed &gt; 4)
    vspeed = 4
if (global.powerup == -80 &amp;&amp; state == 0)
{
    if keyboard_check(global.abajo)
    {
        if (jump_loaded &lt; 60)
            jump_loaded++
        else
            jump_loaded = 60
    }
    else
        jump_loaded = 0
}
else
    jump_loaded = 0
if (keyboard_check(global.lanzar_agarrar) || global.key_br == 1)
{
    if (global.powerup == -29 &amp;&amp; holding == 0)
        hspeedmax = (1.3 + abs((1 * instance_number(obj_invincibility))))
    else
        hspeedmax = (3 + abs((1 * instance_number(obj_invincibility))))
}
else if (global.powerup == -29 &amp;&amp; holding == 0)
    hspeedmax = (1 + abs((1 * instance_number(obj_invincibility))))
else
    hspeedmax = (1.3 + abs((1 * instance_number(obj_invincibility))))
if (keyboard_check_pressed(global.saltar) &amp;&amp; disablecontrols == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2)
{
    if (abs(hspeed) &gt; 2.8)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
        {
            if (global.powerup == -78)
                vspeed = -3.8
            else
                vspeed = -3.3
        }
        else if (global.powerup == -78)
            vspeed = -4.8
        else
            vspeed = -4.3
    }
    else if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
    {
        if (global.powerup == -78)
        {
            if (round((hspeed / 2)) == 0)
                vspeed = -3.45
            else
                vspeed = -3.55
        }
        else if (jump_loaded == 60)
            vspeed = -3.6
        else if (round((hspeed / 2)) == 0)
            vspeed = -2.85
        else
            vspeed = -2.95
    }
    else if (global.powerup == -78)
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -4.45
        else
            vspeed = -4.55
    }
    else if (jump_loaded == 60)
        vspeed = -4.5
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.95
    else
        vspeed = -4.05
    audio_play_sound(scr_jump(), 0, false)
    jumpnow = 1
    s_hen = 1
    state = 2
}
if ((keyboard_check_pressed(global.saltar_spin) &amp;&amp; global.apariencia == 2 &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 0 &amp;&amp; isduck == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; (global.apariencia == 2 || global.apariencia == 3) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; isduck == 0 &amp;&amp; global.yoshi &gt; 0 &amp;&amp; vspeed == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2))
{
    image_index = 0
    if (abs(hspeed) &gt; 2.8)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -2.3
        else
            vspeed = -3.3
    }
    else if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -2.3
        else
            vspeed = -2.3
    }
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.3
    else
        vspeed = -3.3
    jumpnow = 1
    s_hen = 1
    state = 2
    isduck = 0
    y--
    stompstyle = 1
    audio_play_sound(scr_snd_spinjump(), 0, false)
    alarm[7] = 10
    if (global.yoshi == 2)
    {
        global.yoshi = 0
        holding = 0
        if instance_exists(obj_kuriboshoe)
        {
            with (obj_kuriboshoe)
                event_user(0)
        }
    }
    else if (global.yoshi &gt; 0)
    {
        global.yoshi = 0
        holding = 0
        if (direct &gt; 0)
            hspeed = -1.2
        else
            hspeed = 1.2
        if instance_exists(obj_yoshi2)
        {
            with (obj_yoshi2)
                event_user(1)
        }
    }
}
else if ((keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 2 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; global.yoshi &gt; 0 &amp;&amp; vspeed != 0 &amp;&amp; global.apariencia == 2 &amp;&amp; state == 2) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; global.yoshi &gt; 0 &amp;&amp; global.apariencia != 2) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2 &amp;&amp; global.apariencia != 2))
{
    if (abs(hspeed) &gt; 2.8)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
        {
            if (global.powerup == -78)
                vspeed = -3.8
            else
                vspeed = -3.3
        }
        else if (global.powerup == -78)
            vspeed = -4.8
        else
            vspeed = -4.3
    }
    else if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
    {
        if (global.powerup == -78)
        {
            if (round((hspeed / 2)) == 0)
                vspeed = -3.45
            else
                vspeed = -3.55
        }
        else if (round((hspeed / 2)) == 0)
            vspeed = -2.85
        else
            vspeed = -2.95
    }
    else if (global.powerup == -78)
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -4.45
        else
            vspeed = -4.55
    }
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.95
    else
        vspeed = -4.05
    audio_play_sound(scr_jump(), 0, false)
    jumpnow = 1
    s_hen = 1
    state = 2
    if (global.yoshi &gt; 0)
    {
        global.yoshi = 0
        holding = 0
        if instance_exists(obj_yoshi2)
        {
            with (obj_yoshi2)
                event_user(1)
        }
        if instance_exists(obj_kuriboshoe)
        {
            stompstyle = 0
            with (obj_kuriboshoe)
                event_user(0)
        }
    }
}
if ((keyboard_check_released(global.saltar) &amp;&amp; jumpnow == 1) || (keyboard_check_released(global.saltar_spin) &amp;&amp; jumpnow == 1))
    jumpnow = 2
if (isduck == 1 &amp;&amp; state != 2)
{
    if (snow == 1)
    {
        if (hspeed &gt; 0)
            hspeed -= 0.01
        if (hspeed &lt; 0)
            hspeed += 0.01
        if (abs(hspeed) &lt; 0.01)
            hspeed = 0
    }
    else
    {
        if (hspeed &gt; 0)
            hspeed -= 0.05
        if (hspeed &lt; 0)
            hspeed += 0.05
        if (abs(hspeed) &lt; 0.05)
            hspeed = 0
    }
}
else
{
    if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; modo_vuelo == 0)
    {
        if (holding == 2 &amp;&amp; direct != 1 &amp;&amp; stompstyle == 0 &amp;&amp; global.apariencia == 2)
        {
            turning = 1
            alarm[11] = 7
        }
        if (hspeed &lt; hspeedmax)
        {
            if (snow == 1 &amp;&amp; gravity == 0)
            {
                if (hspeed &lt; 0)
                    hspeed += 0.03
                else
                    hspeed += 0.05
            }
            else
            {
                if (hspeed &lt; 0)
                    hspeed += 0.07
                hspeed += 0.06
            }
        }
        if (modo_vuelo == 0 &amp;&amp; (global.apariencia != 0 || global.powerup == -80 || (global.apariencia == 0 &amp;&amp; state != 2)))
            direct = 1
        direct_turn = 1
    }
    else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; modo_vuelo == 0)
    {
        if (holding == 2 &amp;&amp; direct != -1 &amp;&amp; stompstyle == 0 &amp;&amp; global.apariencia == 2)
        {
            turning = 1
            alarm[11] = 7
        }
        if (hspeed &gt; (-hspeedmax))
        {
            if (snow == 1 &amp;&amp; gravity == 0)
            {
                if (hspeed &gt; 0)
                    hspeed += -0.03
                else
                    hspeed += -0.05
            }
            else
            {
                if (hspeed &gt; 0)
                    hspeed += -0.07
                hspeed += -0.06
            }
        }
        if (modo_vuelo == 0 &amp;&amp; direct_turn != 1 &amp;&amp; (global.apariencia != 0 || global.powerup == -80 || (global.apariencia == 0 &amp;&amp; state != 2)))
            direct = -1
        direct_turn = -1
    }
    else if (state != 2)
    {
        if (snow == 1)
        {
            if (hspeed &gt; 0)
                hspeed -= 0.005
            if (hspeed &lt; 0)
                hspeed += 0.005
            if (abs(hspeed) &lt; 0.005)
                hspeed = 0
        }
        else
        {
            if (hspeed &gt; 0)
                hspeed -= 0.05
            else if (hspeed &lt; 0)
                hspeed += 0.05
            if (abs(hspeed) &lt; 0.05)
                hspeed = 0
        }
    }
    if (state != 2 &amp;&amp; abs(hspeed) &gt; hspeedmax)
    {
        if (hspeed &gt; 0)
            hspeed -= 0.025
        else if (hspeed &lt; 0)
            hspeed += 0.025
        if (abs(hspeed) &lt; 0.025)
            hspeed = 0
    }
}
if (state == 2 || statedelay &gt; 0)
{
    if (global.modo_noche == 1 &amp;&amp; global.bg_level == "sky")
    {
        if (global.powerup == -39)
        {
            if (ygrav == 1)
                gravity = 0.04
            else if (pmeter &gt; 5)
                gravity = 0
            else
                gravity = 0.02
        }
        else
            gravity = 0.05
        if (vspeed &gt; 2)
            vspeed = 2
    }
    else if (vspeed &gt; -1 || jumpnow != 1)
    {
        if (global.powerup == -39)
        {
            if (ygrav == 1)
                gravity = 0.2
            else if (pmeter &gt; 5)
                gravity = 0
            else
                gravity = 0.15
        }
        else
            gravity = 0.3
        if (jumpnow == 1)
            jumpnow = 2
    }
    else if (ygrav == 1)
        gravity = 0.1
    else
        gravity = 0.1
    if (global.powerup == 3)
    {
        if ((keyboard_check(global.saltar) &amp;&amp; sprite_index != spr_mario_cap_fly_decender &amp;&amp; sprite_index != spr_luigi_cap_fly_decender &amp;&amp; sprite_index != spr_toad_cap_fly_decender &amp;&amp; sprite_index != spr_toadette_cap_fly_decender &amp;&amp; place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0) || (keyboard_check(global.saltar_spin) &amp;&amp; sprite_index != spr_mario_cap_fly_decender &amp;&amp; sprite_index != spr_luigi_cap_fly_decender &amp;&amp; sprite_index != spr_toad_cap_fly_decender &amp;&amp; sprite_index != spr_toadette_cap_fly_decender &amp;&amp; place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0))
        {
            gravity /= 2
            if (vspeed &gt; 1)
                vspeed = 1
        }
    }
}
if (global.apariencia == 0)
{
    climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
    if (climb1 &amp;&amp; (((y + 19) &gt; climb1.y &amp;&amp; climb1.object_index == obj_vine_green &amp;&amp; climb1.image_index == 0) || climb1.object_index != obj_vine_green || climb1.image_index != 0) &amp;&amp; isduck == 0 &amp;&amp; global.yoshi == 0 &amp;&amp; (keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; state == 2)) &amp;&amp; disablecontrols == 0)
    {
        event_user(15)
        if (hspeed &gt; 0)
            direct = 1
        else if (hspeed &lt; 0)
            direct = -1
        x = (climb1.x + 8)
        state = 3
        speed = 0
        gravity = 0
        canhang = 1
        alarm[6] = 8
    }
}
else
{
    climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
    if (climb1 &amp;&amp; (((y + 19) &gt; climb1.y &amp;&amp; climb1.object_index == obj_vine_green &amp;&amp; climb1.image_index == 0) || climb1.object_index != obj_vine_green || climb1.image_index != 0) &amp;&amp; global.yoshi == 0 &amp;&amp; isduck == 0 &amp;&amp; (keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; state == 2)) &amp;&amp; holding == 0 &amp;&amp; disablecontrols == 0)
    {
        event_user(15)
        state = 3
        gravity = 0
        speed = 0
        walljump = 0
    }
}
if (stompstyle == 1)
{
    if (state != 2)
        stompstyle = 0
}
if (global.powerup == -39)
{
    if (disablegrav &gt; 0)
    {
        if (state != 2)
            disablegrav = 0
        else
        {
            ygrav = 0
            disablegrav--
        }
    }
    else
        ygrav = 1
}
else
    disablegrav = 0
if (state == 2 &amp;&amp; isduck == 0 &amp;&amp; disablecontrols == 0)
{
    if (keyboard_check(global.saltar) &amp;&amp; (!keyboard_check(global.saltar_spin)) &amp;&amp; global.powerup == 3 &amp;&amp; pmeter &gt; 5 &amp;&amp; stompstyle == 0 &amp;&amp; canfly == 0)
    {
        vspeed = -3.5
        fly_cap += 2
        if (fly_cap &gt; 145)
        {
            canfly = 1
            jumpnow = 2
            fly_cap = 0
            with (obj_levelmanager)
            {
                pmeter = 0
                alarm[7] = 15
            }
            if (keyboard_check(global.lanzar_agarrar) &amp;&amp; holding == 0)
            {
                modo_vuelo = 1
                vspeed = 0.4
            }
        }
        jumpnow = 1
    }
    if (keyboard_check_released(global.saltar) &amp;&amp; global.powerup == 3 &amp;&amp; pmeter &gt; 5 &amp;&amp; canfly == 0)
    {
        with (obj_levelmanager)
        {
            pmeter = 0
            alarm[7] = 15
        }
        canfly = 1
        jumpnow = 2
        fly_cap = 0
        if (keyboard_check(global.lanzar_agarrar) &amp;&amp; holding == 0)
            modo_vuelo = 1
    }
    if (vspeed &lt; 0 &amp;&amp; collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_top, obj_solid, 1, 0) &amp;&amp; global.powerup == 3 &amp;&amp; pmeter &gt; 5 &amp;&amp; canfly == 0 &amp;&amp; stompstyle == 0)
    {
        with (obj_levelmanager)
        {
            pmeter = 0
            alarm[7] = 15
        }
        canfly = 1
        jumpnow = 2
        fly_cap = 0
        if (keyboard_check(global.lanzar_agarrar) &amp;&amp; holding == 0)
            modo_vuelo = 1
    }
    if (keyboard_check_released(global.lanzar_agarrar) &amp;&amp; global.powerup == 3 &amp;&amp; modo_vuelo == 1 &amp;&amp; canfly == 1)
        modo_vuelo = 0
    if (keyboard_check(global.lanzar_agarrar) &amp;&amp; global.powerup == 3 &amp;&amp; modo_vuelo == 1 &amp;&amp; canfly == 1)
    {
        if ((keyboard_check_pressed(global.izquierda) &amp;&amp; direct == 1) || (keyboard_check_pressed(global.derecha) &amp;&amp; direct == -1))
        {
            vspeed = 3
            if (sprite_index == spr_mario_cap_fly || sprite_index == spr_luigi_cap_fly || sprite_index == spr_toad_cap_fly || sprite_index == spr_toadette_cap_fly)
            {
                if (image_index &gt; (image_number - 2))
                {
                    image_index = 0
                    image_speed = 0.15
                    sprite_index = scr_mario_cap_fly_acender()
                }
            }
        }
        if ((keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; direct == 1) || (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; direct == -1))
        {
            if (sprite_index == spr_mario_cap_fly || sprite_index == spr_luigi_cap_fly || sprite_index == spr_toad_cap_fly || sprite_index == spr_toadette_cap_fly)
            {
                if (image_index &gt; (image_number - 1))
                {
                    image_index = 0
                    image_speed = 0.18
                    sprite_index = scr_mario_cap_fly_decender()
                }
            }
        }
        if ((keyboard_check_released(global.derecha) &amp;&amp; direct == 1) || (keyboard_check_released(global.izquierda) &amp;&amp; direct == -1))
        {
            if (sprite_index == spr_mario_cap_fly_decender || sprite_index == spr_luigi_cap_fly_decender || sprite_index == spr_toad_cap_fly_decender || sprite_index == spr_toadette_cap_fly_decender)
            {
                if (image_index == 2)
                {
                    image_index = 0
                    image_speed = 0.2
                    sprite_index = scr_mario_cap_fly_acender_decender()
                    fly_high = 6
                }
                else
                {
                    image_index = 0
                    image_speed = 0.15
                    sprite_index = scr_mario_cap_fly_acender()
                }
            }
        }
    }
    if (keyboard_check(global.saltar_spin) &amp;&amp; (!keyboard_check(global.saltar)) &amp;&amp; global.powerup == 3 &amp;&amp; pmeter &gt; 5 &amp;&amp; canfly == 0)
    {
        vspeed = -3.5
        fly_cap += 2
        if (fly_cap &gt; 145)
        {
            canfly = 1
            jumpnow = 2
            fly_cap = 0
        }
        jumpnow = 1
    }
    if (keyboard_check_released(global.saltar_spin) &amp;&amp; global.powerup == 3 &amp;&amp; pmeter &gt; 5 &amp;&amp; canfly == 1)
    {
        jumpnow = 2
        fly_cap = 0
    }
    else if (keyboard_check_released(global.saltar_spin) &amp;&amp; global.powerup == 3 &amp;&amp; pmeter &gt; 5 &amp;&amp; canfly == 0)
    {
        canfly = 1
        jumpnow = 2
        fly_cap = 0
    }
}
if (state == 2 &amp;&amp; stompstyle == 0 &amp;&amp; disablecontrols == 0 &amp;&amp; (global.yoshi == 0 || global.yoshi == 2))
{
    if (global.powerup == -39 &amp;&amp; keyboard_check_pressed(global.saltar) &amp;&amp; jumpnow != 1 &amp;&amp; wiggle &lt; 12 &amp;&amp; sprite_index != scr_mariojumpstar())
    {
        if (!audio_is_playing(snd_atack_leaf))
            audio_play_sound(snd_atack_leaf, 0, false)
        wiggle = 16
        disablegrav = 8
        if (pmeter &gt; 5)
            vspeed = -1.5
        else if (vspeed &lt; 0)
            vspeed = max((vspeed + 0.05), 0)
        else
            vspeed = 0
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (state != 3)
{
    if (keyboard_check(global.saltar) || keyboard_check(global.saltar_spin))
        jumpnow = 1
    else
        jumpnow = 2
    state = 2
    yview = (y + 32)
    camera_jump = 1
    alarm[0] = 4
    alarm[4] = 15
    if ((!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_hurtsolid2, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_solidphy, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_bullebill_base, 1, 0)))
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -2.675
        else
            vspeed = (-(4.225 - (2.55 * isswim)))
        y--
    }
    if (obj_levelmanager.pmeter &gt; 5 &amp;&amp; global.powerup == -39)
    {
        with (obj_levelmanager)
            alarm[8] = 300
    }
    if (stompstyle == 1)
        alarm[7] = 5
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var yoshi, yoshis, yoshi_r;
if (invincible == 0)
{
    if (global.yoshi &gt; 0)
    {
        if (global.yoshi == 1)
        {
            event_user(6)
            if instance_exists(obj_yoshi_red)
                yoshi = obj_yoshi_red
            else
                yoshi = obj_yoshi2
            if instance_exists(yoshi)
            {
                if (yoshi == obj_yoshi_red)
                    yoshis = obj_yoshi_runaway_red
                else
                    yoshis = obj_yoshi_runaway
                yoshi_r = instance_create(yoshi.x, yoshi.y, yoshis)
                if (yoshi.mouthholder != -4)
                {
                    yoshi_r.mouthholder = yoshi.mouthholder
                    yoshi_r.mouthsprite = yoshi.mouthsprite
                }
                with (yoshi)
                    instance_destroy()
                vspeed = -3.5
                hspeed = 0
            }
        }
        else if (global.yoshi == 2)
        {
            event_user(6)
            with (obj_kuriboshoe)
                event_user(5)
        }
        global.yoshi = 0
        holding = 0
        visible = true
        if (global.condiciones == 1 &amp;&amp; global.condiciones_count == 0)
        {
            if (global.condiciones_clear == 1)
            {
                global.condiciones_clear = 0
                with (obj_alert_condicion)
                    instance_destroy()
                with (instance_create((view_xview[0] + 54), (view_yview[0] + 98), obj_alert_condicion))
                    lose = 1
            }
        }
    }
    else if (modo_vuelo == 0)
    {
        if (helmet == 0)
        {
            switch global.powerup
            {
                case 0:
                    visible = false
                    instance_create(x, y, obj_deadmario)
                    instance_destroy()
                    break
                case 1:
                    audio_play_sound(scr_snd_powerdown(), 0, false)
                    with (instance_create(0, 0, obj_mario_transform2))
                    {
                        c_powerup = 1
                        small = 2
                        powerdown = 1
                    }
                    break
                case 3:
                    audio_play_sound(scr_snd_powerdown(), 0, false)
                    global.powerup = 1
                    if instance_exists(obj_cap_mario)
                    {
                        with (obj_cap_mario)
                        {
                            cap_invisible = 1
                            visible = false
                        }
                    }
                    with (instance_create(0, 0, obj_mario_transform2))
                    {
                        cap = 2
                        powerdown = 1
                    }
                    break
                case -39:
                    audio_play_sound(scr_snd_powerdown(), 0, false)
                    with (instance_create(0, 0, obj_mario_transform2))
                    {
                        c_powerup = 1
                        sprite_powerup = 1356
                        powerdown = 1
                    }
                    break
                default:
                    if (global.powerup == -50)
                        obj_levelmanager.mchange = 3
                    audio_play_sound(scr_snd_powerdown(), 0, false)
                    with (instance_create(0, 0, obj_mario_transform2))
                    {
                        c_powerup = 1
                        switch global.apariencia
                        {
                            case 0:
                                sprite_powerup = 551
                                break
                            case 1:
                                sprite_powerup = 1356
                                break
                            case 2:
                                sprite_powerup = 2288
                                break
                            case 3:
                                sprite_powerup = 3680
                                break
                        }

                        powerdown = 1
                    }
            }

        }
        else
        {
            event_user(6)
            helmet = 0
            if instance_exists(obj_brickhelmet)
            {
                with (obj_brickhelmet)
                    event_user(5)
            }
            else
            {
                with (obj_helmet)
                    event_user(5)
            }
            if (global.condiciones == 1 &amp;&amp; global.condiciones_count == 0)
            {
                if (global.condiciones_clear == 1)
                {
                    global.condiciones_clear = 0
                    with (obj_alert_condicion)
                        instance_destroy()
                    with (instance_create((view_xview[0] + 54), (view_yview[0] + 98), obj_alert_condicion))
                        lose = 1
                }
            }
        }
    }
    else
    {
        event_user(6)
        audio_play_sound(snd_mariocap_out, 0, false)
        modo_vuelo = 0
        stompstyle = 1
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="7">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (global.powerup != 3)
    exit
if (sprite_index == scr_mario_cap_fly())
{
    image_speed = 0
    image_index = 2
}
else if (sprite_index == scr_mario_cap_fly_acender())
{
    if (fly_high == 6)
    {
        vspeed = -4.8
        fly_high = 3
    }
    else if (fly_high == 3)
        vspeed = -2.8
    jumpnow = 1
    audio_play_sound(snd_mariocap_rise, 0, false)
    sprite_index = scr_mario_cap_fly()
}
else if (sprite_index == scr_mario_cap_fly_decender())
{
    image_speed = 0
    image_index = 2
}
else if (sprite_index == scr_mario_cap_fly_acender_decender())
    sprite_index = scr_mario_cap_fly_acender()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy()
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (state == 3 &amp;&amp; global.apariencia == 0)
    draw_sprite_ext(sprite_index, image_index, (x - (6 * direct)), (y + 1), direct, image_yscale, 0, c_white, image_alpha)
else if (stompstyle == 1 || (helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5 &amp;&amp; global.apariencia == 3))
    draw_sprite_ext(sprite_index, image_index, (round(x) + shake), (round(y) + 1), 1, image_yscale, 0, c_white, image_alpha)
else
    draw_sprite_ext(sprite_index, image_index, (round(x) + shake), (round(y) + 1), direct, image_yscale, 0, c_white, image_alpha)
if (instance_exists(obj_invincibility) &amp;&amp; global.effect_star == 1)
{
    shader_set(sha_blendreplace)
    if (state == 3 &amp;&amp; global.apariencia == 0)
        draw_sprite_ext(sprite_index, image_index, (x - (6 * direct)), (y + 1), direct, 1, 0, blend_star, flashAlpha)
    else if (stompstyle == 1 || (helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5 &amp;&amp; global.apariencia == 3))
        draw_sprite_ext(sprite_index, image_index, (round(x) + shake), (round(y) + 1), 1, 1, 0, blend_star, flashAlpha)
    else
        draw_sprite_ext(sprite_index, image_index, (round(x) + shake), (round(y) + 1), direct, 1, 0, blend_star, flashAlpha)
    shader_reset()
}
if (helice_fly == 4)
    draw_sprite(spr_NSMBU_mario_helice_remolino, image_index, x, (y + 1))
if (global.condiciones == 1 &amp;&amp; global.condiciones_clear == 1)
{
    if (global.powerup == 0)
    {
        if (global.apariencia &gt; 1)
            draw_sprite(spr_condicion_obtenida, global.jugador, (x - 19), (y - 2))
        else
            draw_sprite(spr_SMB3_condicion_obtenida, 0, (x - 19), (y - 1))
    }
    else if (global.apariencia &gt; 1)
        draw_sprite(spr_condicion_obtenida, global.jugador, (x - 19), (y - 12))
    else
        draw_sprite(spr_SMB3_condicion_obtenida, 0, (x - 19), (y - 11))
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
