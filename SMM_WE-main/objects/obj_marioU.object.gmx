<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_NSMBU_mario_small_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-8</depth>
  <persistent>0</persistent>
  <parentName>obj_mario</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_inherited()
groundpount_cancelled = 0
time_groundpount = 0
smoke_cinta = 0
direct_turn = 1
crouch_temp = 0
slide = 0
jumpnow_temp = 0
walljump_ex = 0
skid_nsmbu = 0
idle_start = 0
triple_jump = 0
triple_count = 0
triple_number = 33
steps_count = 0
step_inter = 0
polvo = 0
flip = 0
flip_count = 0
helice_temp = 0
helice_cont = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>walljump = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>walljump_ex = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var triple_2;
if instance_exists(obj_levelmanager)
    pmeter = obj_levelmanager.pmeter
if (airspin &gt; 1 &amp;&amp; (!instance_exists(obj_mario_transform2)))
{
    if (airspin &gt;= 11.7)
        airspin = 0
    else
        airspin += 0.9
}
if (isswim == 0 &amp;&amp; audio_is_playing(snd_NSMBU_swim2))
    audio_stop_sound(snd_NSMBU_swim2)
if (triple_jump &gt; 0 &amp;&amp; state == 2 &amp;&amp; jumpnow == 0)
    triple_jump = 0
event_user(9)
if (iamkicking == 1 &amp;&amp; stompstyle == 0 &amp;&amp; isduck == 0)
{
    sprite_index = scr_NSMBU_kick(isswim)
    if (image_index &gt; (image_number - 1))
    {
        if (state == 2 &amp;&amp; isswim == 0)
        {
            sprite_index = scr_NSMBU_jump2()
            image_speed = 0
            image_index = 34
            jump_type = 2
        }
        iamkicking = 0
    }
    else
        image_speed = 0.6
}
else if (isduck == 0)
{
    if (global.powerup == 0)
        mask_index = spr_smallmask
    else
        mask_index = spr_bigmask
    if (global.powerup == 2 || global.powerup == -38)
    {
        if (firing &gt; 0)
            firing--
    }
    else
        firing = 0
    if (holding == 0)
    {
        if (state &lt; 2 &amp;&amp; isswim == 0 &amp;&amp; pmeter &gt; 5 &amp;&amp; ((direct == 1 &amp;&amp; hspeed &lt; 0 &amp;&amp; keyboard_check(global.derecha)) || (direct == -1 &amp;&amp; hspeed &gt; 0 &amp;&amp; keyboard_check(global.izquierda))))
        {
            sprite_index = scr_NSMBU_skid()
            image_speed = 0
            if (direct == 1)
                image_index = 1
            else
                image_index = 0
            if (skidnow == 0)
            {
                skidnow = 1
                skid_nsmbu = 1
                audio_play_sound(scr_snd_skid(), 1, true)
            }
        }
        else if (skidnow == 1 &amp;&amp; state &lt; 2 &amp;&amp; direct == 1 &amp;&amp; hspeed &gt; 0 &amp;&amp; keyboard_check(global.derecha))
        {
            if (sprite_index != scr_NSMBU_skid_right() &amp;&amp; (!instance_exists(obj_mario_transform2)))
            {
                image_index = 0
                audio_stop_sound(scr_snd_skid())
            }
            sprite_index = scr_NSMBU_skid_right()
            if (image_index &lt; 6)
                image_speed = 0.6
            else
            {
                sprite_index = scr_NSMBU_runmax()
                image_index = 0
                hspeed = 2.1
                if instance_exists(obj_levelmanager)
                {
                    with (obj_levelmanager)
                        pmeter = 6
                }
                skidnow = 0
            }
        }
        else if (skidnow == 1 &amp;&amp; state &lt; 2 &amp;&amp; direct == -1 &amp;&amp; hspeed &lt; 0 &amp;&amp; keyboard_check(global.izquierda))
        {
            if (sprite_index != scr_NSMBU_skid_left() &amp;&amp; (!instance_exists(obj_mario_transform2)))
            {
                image_index = 0
                audio_stop_sound(scr_snd_skid())
            }
            sprite_index = scr_NSMBU_skid_left()
            if (image_index &lt; 6)
                image_speed = 0.6
            else
            {
                sprite_index = scr_NSMBU_runmax()
                image_index = 0
                hspeed = -2.1
                if instance_exists(obj_levelmanager)
                {
                    with (obj_levelmanager)
                        pmeter = 6
                }
                skidnow = 0
            }
        }
        else if (state == 0)
        {
            if (stuntime &gt; 0)
            {
                sprite_index = scr_NSMBU_stun()
                image_speed = 0.4
            }
            else if (groundpount &gt; 1)
            {
                if (groundpount &gt; 6)
                {
                    if keyboard_check(global.abajo)
                    {
                        sprite_index = scr_NSMBU_crouch_idle()
                        image_index = 0
                        groundpount = 0
                        disablecontrols = 0
                    }
                    else
                    {
                        if (sprite_index != scr_NSMBU_standup() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                            image_index = 0
                        sprite_index = scr_NSMBU_standup()
                        if (image_index &lt; 14)
                            image_speed = 0.6
                        else
                        {
                            sprite_index = scr_NSMBU_idle(isswim)
                            image_index = 0
                            groundpount = 0
                            disablecontrols = 0
                        }
                    }
                }
                else
                {
                    sprite_index = scr_NSMBU_groundpound_stop()
                    image_speed = 0
                    switch global.powerup
                    {
                        case 0:
                            image_index = 0
                            break
                        case 1:
                            image_index = 1
                            break
                        case 2:
                            image_index = 2
                            break
                        case -30:
                            image_index = 3
                            break
                        case -43:
                            image_index = 4
                            break
                        case -38:
                            image_index = 5
                            break
                    }

                    if (groundpount == 2)
                    {
                        with (instance_create(x, y, obj_smoke))
                        {
                            sprite_index = spr_NSMBU_smoke_groundpound
                            direct = 1
                            image_speed = 0.5
                            depth = -10
                        }
                        with (instance_create(x, y, obj_smoke))
                        {
                            sprite_index = spr_NSMBU_smoke_groundpound
                            direct = -1
                            image_speed = 0.5
                            depth = -10
                        }
                        audio_play_sound(snd_NSMBU_groundpount_stop, 0, false)
                        groundpount = 3
                    }
                    if (!instance_exists(obj_groundpount))
                    {
                        if keyboard_check(global.abajo)
                            groundpount += 0.3
                        else
                            groundpount++
                    }
                }
            }
            else if (firing &gt; 0)
            {
                sprite_index = scr_marioshoot()
                if (firing == 19)
                    image_index = 0
                if (image_index &gt;= 13)
                    firing = 0
                image_speed = 0.7
            }
            else if (isswim == 1)
            {
                if (global.powerup == -38)
                {
                    if (sprite_index == spr_NSMBU_mario_penguin_swim)
                    {
                        if (image_index &gt;= 15.5)
                        {
                            sprite_index = spr_NSMBU_mario_penguin_swim_idle
                            image_index = 0
                        }
                        else
                            image_speed = 0.5
                    }
                    else
                    {
                        sprite_index = spr_NSMBU_mario_penguin_swim_idle
                        if (hspeed == 0)
                            image_speed = 0.5
                        else
                            image_speed = 1
                    }
                }
                else if (new_swim == 1)
                {
                    sprite_index = scr_NSMBU_swim2()
                    image_speed = 1
                }
                else if (sprite_index != scr_NSMBU_idle(isswim) &amp;&amp; sprite_index != scr_NSMBU_ground_idle())
                {
                    sprite_index = scr_NSMBU_ground_idle()
                    image_index = 0
                }
                else if (sprite_index == scr_NSMBU_ground_idle())
                {
                    if (image_index &gt;= 10.5)
                    {
                        sprite_index = scr_NSMBU_idle(isswim)
                        image_index = 0
                    }
                    else
                        image_speed = 0.5
                }
                else
                {
                    sprite_index = scr_NSMBU_idle(isswim)
                    image_speed = 0.5
                }
            }
            else
            {
                if (flip &gt; 6)
                {
                    if (flip == 7)
                    {
                        sprite_index = scr_NSMBU_flip_start()
                        if (image_index &gt;= 4.5)
                            flip = 8
                        else
                            image_speed = 0.5
                    }
                    else
                    {
                        sprite_index = scr_NSMBU_flip()
                        image_speed = 0.3
                    }
                }
                else if (sprite_index == scr_NSMBU_ground_idle())
                {
                    if (image_index &gt;= 10.5)
                        sprite_index = scr_NSMBU_idle(isswim)
                    else
                        image_speed = 0.5
                }
                else if (sprite_index == scr_NSMBU_walkhome())
                {
                    if (image_index &gt;= 9)
                        sprite_index = scr_NSMBU_idle(isswim)
                    else
                        image_speed = 1
                }
                else if (sprite_index == scr_NSMBU_idle(isswim))
                {
                    sprite_index = scr_NSMBU_idle(isswim)
                    image_speed = 0.3
                }
                else if (sprite_index == scr_NSMBU_acrouch())
                {
                    if (image_index &gt;= 10)
                    {
                        sprite_index = scr_NSMBU_idle(isswim)
                        crouch_temp = 0
                    }
                    else
                        image_speed = 1
                }
                else if (crouch_temp == 1)
                {
                    sprite_index = scr_NSMBU_acrouch()
                    image_index = 0
                }
                else if (sprite_index == scr_NSMBU_walk(0))
                {
                    sprite_index = scr_NSMBU_walkhome()
                    image_index = 0
                }
                else
                {
                    if (jumpnow_temp == 0)
                        image_index = 5
                    else
                    {
                        audio_play_sound(snd_NSMBU_standup, 0, false)
                        jumpnow_temp = 0
                        image_index = 0
                    }
                    sprite_index = scr_NSMBU_ground_idle()
                }
                if (isswim == 0 &amp;&amp; inclown == 0 &amp;&amp; global.powerup != -38 &amp;&amp; flip &lt; 7)
                {
                    if (flip &lt; 6)
                        flip += 0.01
                    else
                    {
                        flip = 7
                        image_index = 0
                    }
                }
            }
        }
        else if (state == 1)
        {
            flip = 0
            jumpnow_temp = 0
            crouch_temp = 0
            if (firing &gt; 0)
            {
                sprite_index = scr_marioshoot()
                if (firing == 19)
                    image_index = 0
                if (image_index &gt;= 9)
                    firing = 0
                image_speed = 0.7
            }
            else if (isswim == 1)
            {
                if (global.powerup == -38)
                {
                    if (sprite_index == spr_NSMBU_mario_penguin_swim)
                    {
                        if (image_index &gt;= 15.5)
                        {
                            sprite_index = spr_NSMBU_mario_penguin_swim_idle
                            image_index = 0
                        }
                        else
                            image_speed = 0.5
                    }
                    else
                    {
                        sprite_index = spr_NSMBU_mario_penguin_swim_idle
                        if (hspeed == 0)
                            image_speed = 0.5
                        else
                            image_speed = 1
                    }
                }
                else if (new_swim == 1)
                {
                    sprite_index = scr_NSMBU_swim2()
                    image_speed = 1
                }
                else
                {
                    sprite_index = scr_NSMBU_walk(isswim)
                    image_speed = 0.5
                }
            }
            else if (pmeter &lt; 6)
            {
                if (abs(hspeed) &lt;= (1.4 + abs((1 * instance_number(obj_invincibility)))))
                {
                    if (sprite_index == scr_NSMBU_skid_right() || sprite_index == scr_NSMBU_skid_left())
                    {
                        if (image_index &lt; 6)
                            image_speed = 0.5
                        else
                        {
                            sprite_index = scr_NSMBU_walk(isswim)
                            image_speed = 1
                        }
                    }
                    else
                    {
                        sprite_index = scr_NSMBU_walk(isswim)
                        if (abs(hspeed) == (1.4 + abs((1 * instance_number(obj_invincibility)))))
                            image_speed = (1.5 + (0.5 * snow))
                        else
                            image_speed = (1 + (0.5 * snow))
                    }
                }
                else
                {
                    sprite_index = scr_NSMBU_run()
                    image_speed = (1 + (0.5 * snow))
                }
            }
            else
            {
                if (polvo &lt; 5)
                    polvo++
                else
                {
                    if (hspeed &gt; 0)
                        instance_create((x - 20), (y + 18), obj_smoke_steps)
                    else if (hspeed &lt; 0)
                        instance_create((x + 4), (y + 18), obj_smoke_steps)
                    polvo = 0
                }
                sprite_index = scr_NSMBU_runmax()
                image_speed = (0.8 + (0.2 * snow))
            }
        }
        else if (state == 2)
        {
            flip = 0
            crouch_temp = 0
            if (isswim == 1)
            {
                if (noisy == 0)
                {
                    if (global.powerup == -38)
                    {
                        if (firing &gt; 0)
                        {
                            sprite_index = spr_NSMBU_mario_penguin_swim_shoot
                            if (firing == 19)
                                image_index = 0
                            if (image_index &gt;= 11)
                                firing = 0
                            image_speed = 0.7
                        }
                        else if (sprite_index == spr_NSMBU_mario_penguin_swim)
                        {
                            if (image_index &gt;= 15.5)
                            {
                                sprite_index = spr_NSMBU_mario_penguin_swim_idle
                                image_index = 0
                            }
                            else
                                image_speed = 0.5
                        }
                        else
                        {
                            sprite_index = spr_NSMBU_mario_penguin_swim_idle
                            if (hspeed == 0)
                                image_speed = 0.5
                            else
                                image_speed = 1
                        }
                    }
                    else if (firing &gt; 0)
                    {
                        sprite_index = scr_marioshoot()
                        if (firing == 19)
                            image_index = 0
                        if (image_index &gt;= 9)
                            firing = 0
                        image_speed = 0.7
                    }
                    else if (new_swim == 1)
                    {
                        sprite_index = scr_NSMBU_swim2()
                        image_speed = 1
                    }
                    else if (sprite_index == scr_NSMBU_swim())
                    {
                        if (image_index &gt; (image_number - 1))
                        {
                            sprite_index = scr_NSMBU_swim_fall()
                            image_index = 0
                        }
                        else
                        {
                            if (image_speed &gt; 0.5)
                                image_speed -= 0.05
                            else
                                image_speed = 0.5
                            if (keyboard_check(global.saltar) &amp;&amp; image_index &gt; 7 &amp;&amp; image_index &lt; 8)
                            {
                                new_swim = 1
                                audio_play_sound(snd_NSMBU_swim2, 1, true)
                            }
                        }
                    }
                    else
                    {
                        sprite_index = scr_NSMBU_swim_fall()
                        image_speed = 0.5
                    }
                }
            }
            else if (helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5)
            {
                switch helice_fly
                {
                    case 1:
                        if instance_exists(obj_mario_transform2)
                        {
                            sprite_index = spr_NSMBU_mario_helice_transform
                            image_speed = 0
                            switch global.powerup
                            {
                                case -30:
                                    image_index = 0
                                    break
                                case 1:
                                    image_index = 1
                                    break
                            }

                        }
                        else
                        {
                            sprite_index = spr_NSMBU_mario_helice_fly
                            if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
                                image_speed = 0.6
                            else
                                image_speed = 0.9
                            if (vspeed &gt; 1 &amp;&amp; fly_cap == 0)
                                helice_fly = 2
                        }
                        break
                    case 2:
                        if instance_exists(obj_mario_transform2)
                        {
                            sprite_index = spr_NSMBU_mario_helice_transform
                            image_speed = 0
                            switch global.powerup
                            {
                                case -30:
                                    image_index = 2
                                    break
                                case 1:
                                    image_index = 3
                                    break
                            }

                        }
                        else if (sprite_index == spr_NSMBU_mario_helice_drill_spin)
                        {
                            sprite_index = spr_NSMBU_mario_helice_drill_spin_end
                            image_index = 0
                        }
                        else if (sprite_index == spr_NSMBU_mario_helice_drill_spin_end)
                        {
                            if (image_index &gt;= 24)
                            {
                                sprite_index = spr_NSMBU_mario_helice_fall
                                image_index = 0
                            }
                            image_speed = 1
                        }
                        else
                        {
                            sprite_index = spr_NSMBU_mario_helice_fall
                            image_speed = 0.8
                        }
                        break
                    case 3:
                        if instance_exists(obj_mario_transform2)
                        {
                            sprite_index = spr_NSMBU_mario_helice_transform
                            image_speed = 0
                            switch global.powerup
                            {
                                case -30:
                                    image_index = 0
                                    break
                                case 1:
                                    image_index = 1
                                    break
                            }

                        }
                        else
                        {
                            sprite_index = spr_NSMBU_mario_helice_down_spin
                            if (image_index &gt;= 22.5)
                            {
                                if (helice_fly_temp == 1)
                                {
                                    helice_fly_temp = 0
                                    helice_fly = 2
                                }
                                else
                                    helice_fly_temp++
                            }
                            else if (helice_fly_temp == 0)
                                image_speed = 1.5
                            else
                                image_speed = 1
                        }
                        break
                    case 4:
                        sprite_index = scr_NSMBU_drill_spin()
                        image_speed = 1
                        break
                }

            }
            else if (doublejump != 0 &amp;&amp; global.powerup == -43)
            {
                if (doublejump == 1)
                {
                    sprite_index = spr_NSMBU_mario_arcon_doblejump
                    if (image_index &gt;= 39.5)
                    {
                        sprite_index = spr_NSMBU_mario_arcon_fly_d
                        image_index = 0
                        doublejump = 2
                    }
                    else
                        image_speed = 0.5
                }
                else if (airspin == 1)
                {
                    if (sprite_index != scr_NSMBU_airspin1() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                        image_index = 0
                    sprite_index = scr_NSMBU_airspin1()
                    if (!instance_exists(obj_mario_transform2))
                        airspin_count += 0.7
                    if (airspin_count &lt; 11.9)
                        image_speed = 0.7
                    else
                    {
                        image_index = 10
                        airspin = 2
                        airspin_count = 0
                    }
                }
                else
                {
                    sprite_index = spr_NSMBU_mario_arcon_fly_d
                    image_speed = 0.5
                }
            }
            else if (walljump == 1 &amp;&amp; stompstyle == 0)
            {
                if (global.powerup == -43)
                {
                    image_speed = 0.25
                    if (direct == 1)
                        sprite_index = spr_NSMBU_mario_arcon_wallslide_r
                    else
                        sprite_index = spr_NSMBU_mario_arcon_wallslide_l
                }
                else
                {
                    sprite_index = scr_NSMBU_wall_slide()
                    image_speed = 0
                    if (direct == 1)
                        image_index = 0
                    else
                        image_index = 1
                }
            }
            else if (groundpount != 0)
            {
                if (sprite_index != spr_SMB_mario_big_jump_drop)
                {
                    sprite_index = scr_NSMBU_groundpound()
                    if (image_index &gt;= 11.2)
                    {
                        if (time_groundpount &gt; 3)
                        {
                            if (groundpount_cancelled == 1)
                            {
                                sprite_index = scr_NSMBU_groundpound_canceled()
                                image_speed = 0.6
                                image_index = 0
                                groundpount = 0
                                groundpount_cancelled = 0
                                disablecontrols = 0
                            }
                            else
                            {
                                image_speed = 0
                                image_index = 11.2
                                if (groundpount != 2)
                                {
                                    groundpount = 2
                                    if (!instance_exists(obj_groundpount))
                                        instance_create(x, (y + 20), obj_groundpount)
                                    vspeed = 1
                                }
                            }
                            time_groundpount = 0
                        }
                        else
                        {
                            time_groundpount += 1
                            image_speed = 0
                            image_index = 11.2
                        }
                    }
                    else
                        image_speed = 0.8
                }
            }
            else if (triple_jump &gt; 1)
            {
                if (triple_jump == 2)
                {
                    if (sprite_index != scr_NSMBU_triple_jump0() &amp;&amp; sprite_index != scr_NSMBU_triple_jump1() &amp;&amp; sprite_index != scr_NSMBU_triple_jump3() &amp;&amp; sprite_index != scr_NSMBU_airspin1())
                    {
                        triple_2 = choose(1, 0, 1, 1, 0, 2)
                        triple_number = 33
                        image_index = 0
                        switch triple_2
                        {
                            case 0:
                                sprite_index = scr_NSMBU_triple_jump0()
                                break
                            case 1:
                                sprite_index = scr_NSMBU_triple_jump1()
                                break
                            case 2:
                                sprite_index = scr_NSMBU_triple_jump3()
                                break
                        }

                    }
                }
                else
                {
                    if (sprite_index != scr_NSMBU_triple_jump2() &amp;&amp; sprite_index != scr_NSMBU_airspin1() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    {
                        sprite_index = scr_NSMBU_triple_jump2()
                        image_index = 0
                    }
                    triple_number = 35
                }
                if (image_index &lt; triple_number)
                    image_speed = 0.5
                else
                {
                    image_speed = 0
                    image_index = triple_number
                }
                if (airspin == 1)
                {
                    if (image_speed == 0 &amp;&amp; image_index == triple_number)
                    {
                        sprite_index = scr_NSMBU_airspin1()
                        image_index = 0
                        image_speed = 0.7
                    }
                    if (!instance_exists(obj_mario_transform2))
                        airspin_count += 0.7
                    if (airspin_count &gt;= 11.9)
                    {
                        if (triple_jump == 2)
                        {
                            if (sprite_index == scr_NSMBU_airspin1())
                            {
                                sprite_index = scr_NSMBU_triple_jump1()
                                image_speed = 0
                                image_index = triple_number
                            }
                        }
                        else if (sprite_index == scr_NSMBU_airspin1())
                        {
                            sprite_index = scr_NSMBU_triple_jump2()
                            image_index = triple_number
                        }
                        airspin = 2
                        airspin_count = 0
                    }
                }
            }
            else if (instance_exists(obj_invincibility) &amp;&amp; stompstyle == 0)
            {
                sprite_index = scr_NSMBU_jump_star()
                image_speed = 1
                if (airspin == 1)
                {
                    if (!instance_exists(obj_mario_transform2))
                        airspin_count += 0.7
                    if (airspin_count &gt;= 11.9)
                    {
                        airspin = 2
                        airspin_count = 0
                    }
                }
            }
            else if (airspin == 1)
            {
                if (sprite_index != scr_NSMBU_airspin1() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_airspin1()
                if (!instance_exists(obj_mario_transform2))
                    airspin_count += 0.7
                if (airspin_count &lt; 11.9)
                    image_speed = 0.7
                else
                {
                    if (vspeed &lt; 0)
                        image_index = 17
                    else if (vspeed &gt; 0)
                        image_index = 34
                    sprite_index = scr_NSMBU_jump1()
                    jump_type = 1
                    image_speed = 0
                    airspin = 2
                    airspin_count = 0
                }
            }
            else if (stompstyle == 1)
            {
                if (sprite_index != scr_NSMBU_spinjump() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_spinjump()
                image_speed = 0.8
            }
            else if (firing &gt; 0)
            {
                sprite_index = scr_marioshoot()
                if (firing == 19)
                    image_index = 0
                if (image_index &gt;= 11)
                {
                    firing = 0
                    sprite_index = scr_NSMBU_jump1()
                    image_index = 27
                }
                image_speed = 0.7
            }
            else if (sprite_index == scr_NSMBU_groundpound_canceled())
            {
                if (image_index &gt;= 8.5)
                {
                    sprite_index = scr_NSMBU_jump2()
                    image_speed = 0
                    image_index = 34.5
                    jump_type = 2
                }
                else
                    image_speed = 0.5
            }
            else if (vspeed &gt; 0 || collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bortice, 0, 0))
            {
                if (global.powerup == -43 &amp;&amp; keyboard_check(global.saltar) &amp;&amp; holding == 0 &amp;&amp; stompstyle == 0 &amp;&amp; airspin == 0 &amp;&amp; walljump == 0 &amp;&amp; isduck == 0 &amp;&amp; vspeed &gt; 0)
                {
                    switch sprite_index
                    {
                        case spr_NSMBU_mario_arcon_fly_turn:
                            if (direct_turn == 1)
                            {
                                if (image_index &lt;= 1)
                                {
                                    sprite_index = spr_NSMBU_mario_arcon_fly
                                    image_index = 0
                                }
                                else
                                    image_speed = -0.5
                            }
                            else if (image_index &gt;= 15.5)
                            {
                                sprite_index = spr_NSMBU_mario_arcon_fly
                                image_index = 0
                                direct = (-direct)
                            }
                            else
                                image_speed = 0.5
                            break
                        case 3335:
                            image_speed = 0.5
                            break
                        default:
                            if (sprite_index != scr_arcon_fly_start())
                                image_index = 0
                            sprite_index = scr_arcon_fly_start()
                            if (image_index &gt;= 11.5)
                            {
                                sprite_index = scr_arcon_fly()
                                image_index = 0
                                break
                            }
                            else
                                image_speed = 0.5
                    }

                    jumpnow = 0
                }
                else if (sprite_index == spr_NSMBU_mario_arcon_fly || sprite_index == spr_NSMBU_mario_arcon_fly_start)
                {
                    sprite_index = spr_NSMBU_mario_arcon_fly_fall
                    image_index = 0
                }
                else if (sprite_index == spr_NSMBU_mario_arcon_fly_fall)
                {
                    if (image_index &gt;= 17.5)
                    {
                        image_speed = 0
                        image_index = 17.5
                    }
                    else
                        image_speed = 0.5
                }
                else
                {
                    if ((jumpnow == 0 &amp;&amp; jumpnow_temp == 0) || skidnow == 1)
                    {
                        image_index = 23
                        jumpnow_temp = 1
                        jump_type = 1
                    }
                    switch jump_type
                    {
                        case 1:
                            sprite_index = scr_NSMBU_jump1()
                            break
                        case 2:
                            sprite_index = scr_NSMBU_jump2()
                            break
                        case 3:
                            sprite_index = scr_NSMBU_jump3()
                            break
                    }

                    if (image_index &gt;= 34.5)
                    {
                        image_speed = 0
                        image_index = 34.5
                    }
                    else
                        image_speed = 0.5
                }
            }
            else
            {
                if (jump_type == 0)
                    jump_type = choose(1, 2, 3)
                switch jump_type
                {
                    case 1:
                        if (sprite_index != scr_NSMBU_jump1() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                            image_index = 0
                        sprite_index = scr_NSMBU_jump1()
                        break
                    case 2:
                        if (sprite_index != scr_NSMBU_jump2() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                            image_index = 0
                        sprite_index = scr_NSMBU_jump2()
                        break
                    case 3:
                        if (sprite_index != scr_NSMBU_jump3() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                            image_index = 0
                        sprite_index = scr_NSMBU_jump3()
                        break
                }

                if (image_index &gt;= 18.5)
                {
                    image_speed = 0
                    image_index = 18.5
                }
                else
                    image_speed = 0.5
            }
        }
    }
    else
    {
        flip = 0
        crouch_temp = 0
        if (state == 0)
        {
            if (isswim == 1)
            {
                if (sprite_index != scr_NSMBU_swim_hold() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_swim_hold()
                image_speed = 0.5
            }
            else if (sprite_index != scr_NSMBU_hold() &amp;&amp; sprite_index != scr_NSMBU_hold_ground())
            {
                if (sprite_index != scr_NSMBU_hold_jump() &amp;&amp; sprite_index != scr_NSMBU_hold_spinjump())
                    image_index = 7
                else
                {
                    image_index = 0
                    if (gravity == 0)
                    {
                        if (!audio_is_playing(snd_NSMBU_standup))
                            audio_play_sound(snd_NSMBU_standup, 0, false)
                    }
                }
                sprite_index = scr_NSMBU_hold_ground()
            }
            else if (sprite_index == scr_NSMBU_hold_ground())
            {
                if (image_index &gt;= 10.5)
                    sprite_index = scr_NSMBU_hold()
                else
                    image_speed = 0.5
            }
            else
            {
                if (sprite_index != scr_NSMBU_hold())
                {
                    sprite_index = scr_NSMBU_hold()
                    image_index = 0
                }
                image_speed = 0.3
            }
        }
        if (state == 1)
        {
            flip = 0
            jumpnow_temp = 0
            if (isswim == 1)
            {
                if (sprite_index != scr_NSMBU_swim_hold() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_swim_hold()
                image_speed = 0.5
            }
            else
            {
                if (sprite_index != scr_NSMBU_walkhold() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_walkhold()
                if (pmeter &lt; 6)
                {
                    if (global.bg_level == "snow" &amp;&amp; global.modo_noche == 1)
                    {
                        if (abs(hspeed) == 1.4)
                            image_speed = 1.5
                        else
                            image_speed = 1.1
                    }
                    else if (abs(hspeed) == 1.4)
                        image_speed = 1
                    else
                        image_speed = 0.6
                }
                else
                    image_speed = 1.5
            }
        }
        if (state == 2)
        {
            if (isswim == 1)
            {
                if (sprite_index != scr_NSMBU_swim_hold() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_swim_hold()
                image_speed = 0.5
            }
            else if (global.powerup == -43 &amp;&amp; keyboard_check(global.saltar) &amp;&amp; stompstyle == 0 &amp;&amp; airspin == 0 &amp;&amp; walljump == 0 &amp;&amp; isduck == 0 &amp;&amp; vspeed &gt; 0)
            {
                if (sprite_index == spr_NSMBU_mario_arcon_flyhold)
                    image_speed = 0.5
                else
                {
                    if (sprite_index != scr_arcon_fly_start())
                        image_index = 0
                    sprite_index = scr_arcon_fly_start()
                    if (image_index &gt;= 11.5)
                    {
                        sprite_index = scr_arcon_fly()
                        image_index = 0
                    }
                    else
                        image_speed = 0.5
                }
                jumpnow = 0
            }
            else if (helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5)
            {
                switch helice_fly
                {
                    case 1:
                        if instance_exists(obj_mario_transform2)
                        {
                            sprite_index = spr_NSMBU_mario_helice_transform
                            image_speed = 0
                            switch global.powerup
                            {
                                case -30:
                                    image_index = 0
                                    break
                                case 1:
                                    image_index = 1
                                    break
                            }

                        }
                        else
                        {
                            sprite_index = spr_NSMBU_mario_helice_hold_fly
                            image_speed = 0.5
                            if (vspeed &gt; 0.5 &amp;&amp; fly_cap == 0)
                                helice_fly = 2
                        }
                        break
                    case 2:
                        if instance_exists(obj_mario_transform2)
                        {
                            sprite_index = spr_NSMBU_mario_helice_transform
                            image_speed = 0
                            switch global.powerup
                            {
                                case -30:
                                    image_index = 2
                                    break
                                case 1:
                                    image_index = 3
                                    break
                            }

                        }
                        else
                        {
                            if (sprite_index != spr_NSMBU_mario_helice_fall_hold)
                                image_index = 0
                            sprite_index = spr_NSMBU_mario_helice_fall_hold
                            image_speed = 1
                        }
                        break
                    case 3:
                        if instance_exists(obj_mario_transform2)
                        {
                            sprite_index = spr_NSMBU_mario_helice_transform
                            image_speed = 0
                            switch global.powerup
                            {
                                case -30:
                                    image_index = 0
                                    break
                                case 1:
                                    image_index = 1
                                    break
                            }

                        }
                        else
                        {
                            sprite_index = spr_NSMBU_mario_helice_down_spin_hold
                            if (image_index &gt;= 23)
                                helice_fly = 2
                            else
                                image_speed = 1
                        }
                        break
                    case 4:
                        sprite_index = scr_NSMBU_drill_spin()
                        image_speed = 1
                        break
                }

            }
            else if (airspin == 1)
            {
                if (sprite_index != scr_NSMBU_hold_airspin() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_hold_airspin()
                if (!instance_exists(obj_mario_transform2))
                    airspin_count += 0.7
                if (airspin_count &lt; 11.9)
                    image_speed = 0.7
                else
                {
                    jump_type = 3
                    sprite_index = scr_NSMBU_hold_jump()
                    image_speed = 0
                    image_index = 22
                    airspin = 2
                    airspin_count = 0
                }
            }
            else if (stompstyle == 1)
            {
                if (sprite_index != scr_NSMBU_hold_spinjump() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_hold_spinjump()
                image_speed = 0.7
            }
            else
            {
                if (sprite_index != scr_NSMBU_hold_jump() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                    image_index = 0
                sprite_index = scr_NSMBU_hold_jump()
                if (image_index &lt; 22)
                    image_speed = 0.6
                else
                {
                    image_speed = 0
                    image_index = 22
                }
            }
        }
    }
    if (state == 3)
    {
        flip = 0
        jumpnow_temp = 0
        crouch_temp = 0
        if (sprite_index == scr_marioclimb())
        {
            if (speed == 0)
            {
                image_speed = 0
                image_index = 0
                if audio_is_playing(snd_NSMBU_vine_up)
                    audio_stop_sound(snd_NSMBU_vine_up)
            }
            else
            {
                if keyboard_check(global.lanzar_agarrar)
                    image_speed = 0.6
                else
                    image_speed = 0.5
                if (!audio_is_playing(snd_NSMBU_vine_up))
                    audio_play_sound(snd_NSMBU_vine_up, 1, true)
            }
        }
        else if (sprite_index == scr_NSMBU_marioclimb_start())
        {
            if (image_index &gt;= 3.5)
            {
                sprite_index = scr_marioclimb()
                image_index = 0
            }
            else
                image_speed = 0.5
        }
        else
        {
            if (global.powerup == -43)
                sprite_index = scr_marioclimb()
            else
                sprite_index = scr_NSMBU_marioclimb_start()
            image_index = 0
        }
    }
}
else if (isduck == 1)
{
    flip = 0
    jumpnow_temp = 0
    if (global.powerup == 0)
        mask_index = spr_smallduckmask
    else
        mask_index = spr_smallmask
    if (airspin == 1)
    {
        if (slide == 1)
        {
            if (sprite_index != spr_NSMBU_mario_penguin_slide_airspin &amp;&amp; (!instance_exists(obj_mario_transform2)))
                image_index = 0
            sprite_index = spr_NSMBU_mario_penguin_slide_airspin
        }
        else
        {
            if (sprite_index != scr_NSMBU_spincrouch() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                image_index = 0
            sprite_index = scr_NSMBU_spincrouch()
        }
        if (!instance_exists(obj_mario_transform2))
            airspin_count += 0.7
        if (airspin_count &lt; 11.9)
            image_speed = 0.7
        else
        {
            if (slide == 1)
                sprite_index = spr_NSMBU_mario_penguin_slide_jump
            else
                sprite_index = scr_NSMBU_crouch_jump()
            image_index = 22
            image_speed = 0.5
            airspin = 2
            airspin_count = 0
        }
    }
    else if (state == 2)
    {
        if (slide == 1)
        {
            if (sprite_index != spr_NSMBU_mario_penguin_slide_jump &amp;&amp; (!instance_exists(obj_mario_transform2)))
                image_index = 0
            sprite_index = spr_NSMBU_mario_penguin_slide_jump
            if (image_index &lt; 33)
                image_speed = 0.5
            else
            {
                image_speed = 0
                image_index = 33
            }
        }
        else
        {
            if (sprite_index != scr_NSMBU_crouch_jump() &amp;&amp; (!instance_exists(obj_mario_transform2)))
                image_index = 0
            sprite_index = scr_NSMBU_crouch_jump()
            if (image_index &lt; 25)
                image_speed = 0.5
            else
            {
                image_speed = 0
                image_index = 25
            }
        }
    }
    else
    {
        if (slide == 1)
        {
            if (sprite_index == spr_NSMBU_mario_penguin_slide || sprite_index == spr_NSMBU_mario_penguin_slide_jump)
            {
                sprite_index = spr_NSMBU_mario_penguin_slide
                image_speed = 0.5
            }
            else
            {
                sprite_index = spr_NSMBU_mario_penguin_slide_start
                if (image_index &gt;= 5.5)
                {
                    sprite_index = spr_NSMBU_mario_penguin_slide
                    image_index = 0
                }
                else
                    image_speed = 0.5
            }
        }
        else if (sprite_index == scr_NSMBU_crouch_jump())
        {
            sprite_index = scr_NSMBU_crouch_fall()
            image_index = 0
        }
        else if (sprite_index == scr_NSMBU_crouch_fall())
        {
            if (image_index &lt; 7)
                image_speed = 0.5
            else
            {
                sprite_index = scr_NSMBU_crouch_idle()
                image_index = 0
                image_speed = 0.5
            }
        }
        else if (sprite_index == scr_NSMBU_crouch_idle())
            image_speed = 0.5
        else if (sprite_index == scr_NSMBU_crouch())
        {
            if (image_index &gt;= 2.5)
                sprite_index = scr_NSMBU_crouch_idle()
            else
                image_speed = 0.5
        }
        else if (sprite_index == scr_NSMBU_acrouch())
        {
            if (image_index &lt;= 1)
                sprite_index = scr_NSMBU_crouch_idle()
            else
                image_speed = -1
        }
        else
        {
            sprite_index = scr_NSMBU_crouch()
            image_index = 0
            crouch_temp = 1
        }
        if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0)
            direct = 1
        else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0)
            direct = -1
    }
}
if ((sprite_index != scr_NSMBU_skid() &amp;&amp; sprite_index != scr_NSMBU_skid_right() &amp;&amp; sprite_index != scr_NSMBU_skid_left() &amp;&amp; skidnow == 1 &amp;&amp; (!instance_exists(obj_mario_transform2))) || (state &gt; 1 &amp;&amp; skidnow == 1))
{
    audio_stop_sound(scr_snd_skid())
    skidnow = 0
}
if (audio_is_playing(scr_snd_skid()) &amp;&amp; skidnow == 0)
    audio_stop_sound(scr_snd_skid())
if (sprite_index != scr_marioclimb() &amp;&amp; sprite_index != scr_NSMBU_marioclimb_start() &amp;&amp; audio_is_playing(snd_NSMBU_vine_up) &amp;&amp; (!instance_exists(obj_mario_transform2)))
{
    audio_stop_sound(snd_NSMBU_vine_up)
    skidnow = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var solidtop, solidphy, b_drybones, col_one_right, col_one_left, one_2, col_one_bottom, block_col, rock_parent;
if (flashAlpha &gt; 0)
    flashAlpha -= 0.03
if ((global.modo_noche == 1 &amp;&amp; global.bg_level == "snow") || ((collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_block_ice, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_icecoin, 0, 0)) &amp;&amp; global.powerup != -38))
    snow = 1
else
    snow = 0
if ((collision_rectangle(bbox_left, (bbox_bottom - 5), bbox_right, (bbox_bottom + 5), obj_platform_parent, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom - 5), bbox_right, (bbox_bottom + 5), obj_block_pow_hold, 0, 0)) &amp;&amp; state &lt; 2)
    platform_m = 1
else
    platform_m = 0
if (walljump == 0 &amp;&amp; audio_is_playing(snd_NSMBU_desllizarse_walljump))
    audio_stop_sound(snd_NSMBU_desllizarse_walljump)
if (global.yoshi == 0)
{
    if instance_exists(obj_helmet)
    {
        if (collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom + 1), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom + 1), obj_pinchos, 0, 0))
            event_user(0)
    }
    else if (collision_rectangle((bbox_left - 1), (bbox_top - 1), (bbox_right + 1), (bbox_bottom + 1), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), (bbox_top - 1), (bbox_right + 1), (bbox_bottom + 1), obj_pinchos, 0, 0))
        event_user(0)
}
else if (!instance_exists(obj_helmet))
{
    if (collision_rectangle((bbox_left - 1), bbox_top, (bbox_right + 1), (bbox_bottom - 4), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), bbox_top, (bbox_right + 1), (bbox_bottom - 4), obj_pinchos, 0, 0))
        event_user(0)
}
else if (collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom - 4), obj_muncher, 0, 0) || collision_rectangle((bbox_left - 1), (bbox_top + 8), (bbox_right + 1), (bbox_bottom - 4), obj_pinchos, 0, 0))
    event_user(0)
if (boostme &gt; 0)
{
    boostme--
    if (abs(hspeed) &lt; hspeedmax)
        boostme = 0
}
if (vspeed &gt;= 0)
{
    solidtop = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_solidtop, 0, 0)
    solidphy = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_physicssolid, 0, 0)
    b_drybones = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + vspeed), obj_lava_water_drybones, 0, 0)
    if (solidtop &amp;&amp; bbox_bottom &lt; (solidtop.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (solidtop.y - 1), obj_solid, 1, 0)))
    {
        y = (solidtop.y - 32)
        vspeed = 0
        gravity = 0
        event_user(15)
    }
    if (solidphy &amp;&amp; bbox_bottom &lt; (solidphy.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (solidphy.y - 1), obj_solid, 1, 0)))
    {
        y = (solidphy.y - 32)
        vspeed = 0
        gravity = 0
        event_user(15)
    }
    if (b_drybones &amp;&amp; bbox_bottom &lt; (b_drybones.yprevious + 5) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top + 4), bbox_right, (b_drybones.y - 1), obj_solid, 1, 0)) &amp;&amp; (instance_exists(obj_kuribo_drybones) || (global.powerup == -38 &amp;&amp; slide == 1)))
    {
        y = (b_drybones.y - 32)
        vspeed = 0
        gravity = 0
        event_user(15)
    }
}
if (stuntime &gt; 0)
{
    if (stuntime == 1)
    {
        stuntime = 0
        groundpount = 0
        disablecontrols = 0
    }
    stuntime--
}
if (isswim == 0)
{
    switch state
    {
        case 3:
            event_user(4)
            break
        default:
            event_user(2)
    }

}
else
{
    switch state
    {
        case 3:
            event_user(4)
            break
        default:
            event_user(3)
    }

}
if (new_swim == 0 &amp;&amp; audio_is_playing(snd_NSMBU_swim2))
    audio_stop_sound(snd_NSMBU_swim2)
if collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_solid, 1, 0)
{
    if (hspeed &gt; 0)
        hspeed = 0
    while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_solid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_solid, 0, 0)))
        x--
}
else if collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0)
{
    if (hspeed &lt; 0)
        hspeed = 0
    while (collision_rectangle(bbox_left, (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_solid, 0, 0)))
        x++
}
if collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0)
{
    if (hspeed &gt; 0)
        hspeed = 0
    if ((!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_physicssolid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_physicssolid, 0, 0)))
            x--
    }
}
else if collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, 1, 0)
{
    if (hspeed &lt; 0)
        hspeed = 0
    if ((!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_left, (bbox_top + 4), (bbox_left + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_physicssolid, 0, 0)))
            x++
    }
}
if collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_bullebill_base, 1, 0)
{
    if (hspeed &gt; 0)
        hspeed = 0
    if ((!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_bullebill_base, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_bullebill_base, 0, 0)))
            x--
    }
}
else if collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0)
{
    if (hspeed &lt; 0)
        hspeed = 0
    if ((!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_bullebill_base, 1, 0)))
    {
        while (collision_rectangle(bbox_left, (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_solidphy, 0, 0)))
            x++
    }
}
col_one_right = collision_rectangle((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_onewaygate_right, 1, 0)
col_one_left = collision_rectangle(bbox_right, (bbox_top + 4), (bbox_right + 1), (bbox_bottom - 1), obj_onewaygate_left, 1, 0)
if col_one_right
{
    if (hspeed &lt; 0)
    {
        hspeed = 0
        with (col_one_right)
        {
            rot = 1
            event_user(0)
        }
    }
    while (collision_rectangle(bbox_left, (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_onewaygate_right, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_onewaygate_right, 0, 0)))
        x++
}
else if col_one_left
{
    if (hspeed &gt; 0)
    {
        hspeed = 0
        with (col_one_left)
        {
            rot = 1
            event_user(0)
        }
    }
    while (collision_rectangle(bbox_right, (bbox_top + 4), bbox_right, (bbox_bottom - 1), obj_onewaygate_left, 1, 0) &amp;&amp; (!collision_point(x, (bbox_top + 4), obj_onewaygate_left, 0, 0)))
        x--
}
pow = collision_rectangle((bbox_left + 1), (bbox_top - 2), (bbox_right - 1), bbox_top, obj_block_pow_hold, 1, 0)
if (vspeed &lt; 0 &amp;&amp; pow &amp;&amp; pow.held == 0 &amp;&amp; pow.inmune == 0 &amp;&amp; (pow.y + 16) &lt; bbox_top)
{
    vspeed = 0
    with (pow)
    {
        explode = 1
        event_user(6)
    }
}
pswitch = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_pswitch, 1, 0)
if (pswitch &amp;&amp; pswitch.inmune == 0 &amp;&amp; pswitch.inup == 1)
{
    with (pswitch)
        event_user(6)
}
one_2 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)
if (vspeed &lt; 0 &amp;&amp; (collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_solid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_physicssolid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_bullebill_base, 1, 0) || (pswitch &amp;&amp; pswitch.held == 0 &amp;&amp; (pswitch.y + 16) &lt; bbox_top) || (one_2 &amp;&amp; (bbox_top + 5) &gt;= one_2.bbox_bottom)))
{
    if (state &gt; 1)
    {
        while collision_rectangle(bbox_left, (bbox_top + 1), bbox_right, (bbox_top + 1), obj_solid, 1, 0)
            y++
    }
    vspeed = 0
    col_one_bottom = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)
    if col_one_bottom
    {
        with (col_one_bottom)
        {
            rot = 1
            event_user(0)
        }
    }
    else if (!audio_is_playing(scr_snd_bump()))
    {
        audio_stop_sound(scr_jump())
        audio_play_sound(scr_snd_bump(), 0, false)
    }
    block_col = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_blockparent, 1, 0)
    rock_parent = collision_rectangle(bbox_left, (bbox_top - 2), bbox_right, bbox_top, obj_rockparent, 1, 0)
    if (instance_exists(obj_helmet_spiny) &amp;&amp; rock_parent &amp;&amp; rock_parent.vspeed == 0)
    {
        with (rock_parent)
            alarm[0] = 1
    }
    if ((instance_exists(obj_helmet_spiny) || global.powerup == -77) &amp;&amp; block_col &amp;&amp; block_col.vspeed == 0 &amp;&amp; block_col.object_index != obj_onoffblock &amp;&amp; block_col.object_index != obj_noteblock &amp;&amp; block_col.object_index != obj_musicblock &amp;&amp; block_col.object_index != obj_noteblock_s)
    {
        with (block_col)
            alarm[2] = 1
    }
    if (block_col &amp;&amp; block_col.vspeed == 0 &amp;&amp; block_col.object_index == obj_flipblock &amp;&amp; global.apariencia != 2 &amp;&amp; (global.powerup != 0 || (global.powerup == 0 &amp;&amp; instance_exists(obj_helmet))))
    {
        with (block_col)
            alarm[2] = 1
    }
    else if (block_col &amp;&amp; block_col.object_index == obj_onoffblock &amp;&amp; block_col.ready == 0)
    {
        with (block_col)
            event_user(1)
    }
    else if block_col
    {
        if (block_col.ready == 0)
        {
            with (block_col)
            {
                ready = 1
                vspeed = -2
                if (object_index == obj_noteblock || object_index == obj_musicblock || object_index == obj_noteblock_s)
                    alarm[0] = 7
                else
                    alarm[0] = 4
                event_user(0)
            }
        }
    }
    if (noisy == 0 &amp;&amp; state &lt; 3 &amp;&amp; vspeed &lt; 0)
    {
        jumpnow = 2
        audio_stop_sound(scr_snd_bump())
        audio_stop_sound(scr_jump())
        audio_play_sound(scr_snd_bump(), 0, false)
    }
}
if (state &lt; 3)
{
    if (state != 2 &amp;&amp; disablecontrols == 0)
    {
        if (global.powerup == -38 &amp;&amp; isswim == 1)
            isduck = 0
        else if (keyboard_check(global.abajo) &amp;&amp; (holding == 0 || holding == 3) &amp;&amp; noisy == 0)
        {
            if (gravity == 0 &amp;&amp; isduck == 0)
            {
                audio_stop_sound(snd_NSMBU_duck)
                audio_play_sound(snd_NSMBU_duck, 0, false)
            }
            isduck = 1
        }
        else if ((!keyboard_check(global.abajo)) &amp;&amp; (collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_solid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_bullebill_base, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 12), bbox_right, bbox_top, obj_physicssolid, 1, 0) || collision_rectangle(bbox_left, (bbox_top - 16), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)) &amp;&amp; global.powerup != 0 &amp;&amp; isduck == 1)
            isduck = 1
        else
            isduck = 0
    }
    else if (state == 2 &amp;&amp; disablecontrols == 0)
    {
        if ((!keyboard_check(global.abajo)) &amp;&amp; isduck == 1 &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 6), bbox_right, bbox_top, obj_bullebill_base, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 12), bbox_right, bbox_top, obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 12), bbox_right, bbox_top, obj_solidphy, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 16), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)) &amp;&amp; place_free(x, (y + 1)) &amp;&amp; vspeed &gt; 0)
        {
            jump_type = 1
            sprite_index = scr_NSMBU_jump1()
            image_speed = 0
            image_index = 19
            isduck = 0
        }
    }
    if (keyboard_check_pressed(global.lanzar_agarrar) &amp;&amp; instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.barrier == 0)
        alarm[10] = 1
}
else
    isduck = 0
if (isswim == 0 &amp;&amp; (global.bg_level == "underwater" || (global.bg_level == "castle" &amp;&amp; global.modo_noche == 1) || (instance_exists(obj_lava_water) &amp;&amp; global.bg_level == "forest" &amp;&amp; global.modo_noche == 0 &amp;&amp; (y + 18) &gt;= obj_lava_water.y) || (instance_exists(obj_lava_water) &amp;&amp; global.bg_level == "beach" &amp;&amp; (y + 18) &gt;= obj_lava_water.y)))
{
    isswim = 1
    groundpount = 0
    disablecontrols = 0
    event_user(15)
    walljump = 0
    if (instance_exists(obj_lava_water) &amp;&amp; (bbox_bottom - 8) &gt; (obj_lava_water.y - 12))
        instance_create(x, (obj_lava_water.y - 26), obj_splash_agua)
    if (state &gt; 2)
        state = 2
}
switch global.bg_level
{
    case "underwater":
        if (instance_exists(obj_levelmanager) &amp;&amp; obj_levelmanager.camlock == 1)
        {
            if (y &lt; (view_yview[0] - 16))
                y = (view_yview[0] - 16)
        }
        else if (y &lt; -16)
            y = -16
        break
    default:
        if (y &lt; -96)
            y = -96
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="19">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var steps_sound, c_model, c_start_goal;
if (isswim == 0 &amp;&amp; state == 1 &amp;&amp; isduck == 0 &amp;&amp; skidnow == 0)
{
    if (pmeter &gt; 6)
        steps_sound = 9
    else if (abs(hspeed) &lt;= 1)
        steps_sound = 16
    else if (abs(hspeed) &lt;= 1.6)
        steps_sound = 12
    else if (abs(hspeed) &gt; 1.6)
        steps_sound = 12
    if (steps_count &gt; 0)
    {
        steps_count--
        exit
    }
    if (global.powerup == -38)
    {
        if (step_inter == 0)
            audio_play_sound(snd_NSMBU_step_penguin1, 0, false)
        else
            audio_play_sound(snd_NSMBU_step_penguin2, 0, false)
    }
    else
    {
        c_model = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_modelsolid, 0, 0)
        c_start_goal = collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_groundparent, 0, 0)
        if (global.bg_level == "ground" || global.bg_level == "forest" || global.bg_level == "beach" || global.bg_level == "fall" || global.bg_level == "snow" || global.bg_level == "sky")
        {
            if (c_model || c_start_goal)
                scr_step_sounds(0, step_inter)
            else
                scr_step_sounds(1, step_inter)
        }
        else if (global.bg_level == "airship")
        {
            if c_start_goal
                scr_step_sounds(0, step_inter)
            else if c_model
                scr_step_sounds(2, step_inter)
            else
                scr_step_sounds(1, step_inter)
        }
        else
            scr_step_sounds(1, step_inter)
    }
    if (step_inter == 0)
        step_inter = 1
    else
        step_inter = 0
    steps_count = steps_sound
}
else
{
    steps_count = 0
    step_inter = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var climb1;
if (gravity == 0 &amp;&amp; collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0))
{
    if (vspeed &gt;= 0 &amp;&amp; (!instance_exists(obj_mario_transform2)))
    {
        statedelay = 0
        if (hspeed == 0)
            state = 0
        else
            state = 1
    }
    else if (vspeed &lt; 0)
        state = 2
    if (groundpount == 1)
        groundpount = 0
}
else
{
    statedelay++
    if (statedelay &gt; 4)
        state = 2
    gravity = 0.03
}
flip = 0
helice_fly = 0
if audio_is_playing(snd_NSMBU_helice_planear)
    audio_stop_sound(snd_NSMBU_helice_planear)
if (global.powerup == -38)
{
    gravity = 0
    if (hspeedmax &gt; 1)
        hspeedmax -= 0.005
    else
        hspeedmax = 1
    if (keyboard_check_pressed(global.saltar) &amp;&amp; disablecontrols == 0)
    {
        switch swimtype
        {
            case 0:
                hspeed = (3 * direct)
                break
            case 1:
                vspeed = -3
                hspeed = 0
                break
            case 2:
                vspeed = 3
                hspeed = 0
                break
        }

        if (sprite_index != spr_NSMBU_mario_penguin_swim || (sprite_index == spr_NSMBU_mario_penguin_swim &amp;&amp; image_index &gt; (image_number - 4)))
            image_index = 0
        sprite_index = spr_NSMBU_mario_penguin_swim
        image_speed = 0.5
        audio_stop_sound(scr_swim())
        audio_play_sound(scr_swim(), 0, false)
        state = 2
        isduck = 0
        isduckhold = 0
        new_swim = 0
        hspeedmax = 2
    }
    if (keyboard_check(global.izquierda) &amp;&amp; isduck == 0 &amp;&amp; (!keyboard_check(global.derecha)))
    {
        hspeed += -0.2
        direct = -1
        swimtype = 0
    }
    else if (keyboard_check(global.derecha) &amp;&amp; isduck == 0 &amp;&amp; (!keyboard_check(global.izquierda)))
    {
        hspeed += 0.2
        direct = 1
        swimtype = 0
    }
    else
    {
        if (hspeed &gt; 0)
            hspeed -= 0.04
        else if (hspeed &lt; 0)
            hspeed += 0.04
        if (abs(hspeed) &lt; 0.04)
            hspeed = 0
    }
    if keyboard_check(global.arriba)
    {
        vspeed += -0.2
        swimtype = 1
    }
    else if keyboard_check(global.abajo)
    {
        swimtype = 2
        if collision_rectangle(bbox_left, bbox_bottom, bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0)
            vspeed = 0
        else
            vspeed += 0.2
    }
    else
    {
        if (vspeed &gt; 0)
            vspeed -= 0.04
        else if (vspeed &lt; 0)
            vspeed += 0.04
        if (abs(vspeed) &lt; 0.04)
            vspeed = 0
    }
    if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; global.yoshi &gt; 0)
    {
        vspeed = -2
        audio_play_sound(scr_swim(), 0, false)
        state = 2
        isduck = 0
        global.yoshi = 0
        holding = 0
        if instance_exists(obj_kuriboshoe)
        {
            with (obj_kuriboshoe)
                event_user(0)
        }
    }
    if (hspeed &gt; hspeedmax)
        hspeed = hspeedmax
    if (hspeed &lt; (-hspeedmax))
        hspeed = (-hspeedmax)
    if (vspeed &gt; hspeedmax)
        vspeed = hspeedmax
    if (vspeed &lt; (-hspeedmax))
        vspeed = (-hspeedmax)
}
else
{
    if (holding == 0 || holding == 3)
    {
        if (new_swim == 1)
        {
            if (vspeed &gt; 0.5)
                vspeed = 0.5
        }
        else if (vspeed &gt; 1)
            vspeed = 1
        if (vspeed &lt; -1.5)
            vspeed = -1.5
        if (keyboard_check_pressed(global.saltar) &amp;&amp; disablecontrols == 0)
        {
            if (state &lt; 2)
                vspeed = -1
            else if (vspeed &gt; 0)
                vspeed = (-(vspeed + 0.18))
            else
                vspeed -= 0.6
            if (sprite_index != scr_NSMBU_swim() || (sprite_index == scr_NSMBU_swim() &amp;&amp; image_index &gt; (image_number - 4)))
                image_index = 0
            sprite_index = scr_NSMBU_swim()
            image_speed = 0.9
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
            state = 2
            isduck = 0
            isduckhold = 0
            new_swim = 0
        }
        if (keyboard_check_released(global.saltar) &amp;&amp; new_swim == 1)
        {
            new_swim = 0
            sprite_index = scr_NSMBU_swim()
            image_index = 8
        }
        if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; global.yoshi &gt; 0)
        {
            vspeed = -1
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
            state = 2
            isduck = 0
            isduckhold = 0
            global.yoshi = 0
            holding = 0
            if instance_exists(obj_yoshi2)
            {
                with (obj_yoshi2)
                    event_user(1)
            }
            if instance_exists(obj_kuriboshoe)
            {
                stompstyle = 0
                with (obj_kuriboshoe)
                    event_user(0)
            }
        }
        if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed += 0.05
            direct = 1
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed -= 0.05
            direct = -1
        }
        else
        {
            if (hspeed &gt; 0)
                hspeed -= 0.05
            if (hspeed &lt; 0)
                hspeed += 0.05
            if (abs(hspeed) &lt; 0.05)
                hspeed = 0
        }
    }
    else
    {
        vspeed -= 0.5
        if (vspeed &lt; -1)
            vspeed = -1
        if (vspeed &gt; 1)
            vspeed = 1
        if (keyboard_check_pressed(global.abajo) &amp;&amp; disablecontrols == 0)
        {
            audio_stop_sound(scr_swim())
            audio_play_sound(scr_swim(), 0, false)
        }
        if (keyboard_check(global.abajo) &amp;&amp; disablecontrols == 0)
            vspeed = 1
        if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed += 0.05
            direct = 1
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; (isduck == 0 || state == 2))
        {
            hspeed -= 0.05
            direct = -1
        }
        else if (direct == 1)
        {
            hspeed += 0.05
            if (hspeed &gt; 0.5)
                hspeed = 0.5
        }
        else
        {
            hspeed -= 0.05
            if (hspeed &lt; -0.5)
                hspeed = -0.5
        }
    }
    if (state == 2)
    {
        if (hspeed &gt; 1)
            hspeed = 1
        if (hspeed &lt; -1)
            hspeed = -1
    }
    else
    {
        if (hspeed &gt; 0.5)
            hspeed = 0.5
        if (hspeed &lt; -0.5)
            hspeed = -0.5
    }
    if (noisy == 1)
    {
        noisy = 0
        audio_stop_sound(scr_swim())
    }
}
climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
if (climb1 &amp;&amp; (((y + 19) &gt; climb1.y &amp;&amp; climb1.object_index == obj_vine_green &amp;&amp; climb1.image_index == 0) || climb1.object_index != obj_vine_green || climb1.image_index != 0) &amp;&amp; global.yoshi == 0 &amp;&amp; isduck == 0 &amp;&amp; (keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; state == 2)) &amp;&amp; holding == 0 &amp;&amp; disablecontrols == 0)
{
    audio_stop_sound(snd_NSMBU_get_vine)
    audio_play_sound(snd_NSMBU_get_vine, 0, false)
    state = 3
    gravity = 0
    speed = 0
    event_user(15)
    event_user(14)
    walljump = 0
    airspin = 0
    groundpount = 0
    triple_jump = 0
    triple_count = 0
}
if (instance_exists(obj_lava_water) &amp;&amp; ((global.bg_level == "forest" &amp;&amp; global.modo_noche == 0) || global.bg_level == "beach") &amp;&amp; (y + 16) &lt;= (obj_lava_water.y - 4))
{
    isswim = 0
    if place_meeting(x, (y + 16), obj_lava_water)
    {
        if (global.apariencia != 0 &amp;&amp; vspeed &gt; 0)
            instance_create(x, (obj_lava_water.y - 26), obj_splash_agua)
        if keyboard_check(global.saltar)
        {
            vspeed = -4.125
            jumpnow = 1
            if (global.apariencia != 0)
                instance_create(x, (obj_lava_water.y - 26), obj_splash_agua)
        }
    }
    if (noisy == 1)
    {
        noisy = 0
        audio_stop_sound(scr_swim())
    }
}
if (global.yoshi != 2)
    stompstyle = 0
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="12">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var climb1;
if (gravity == 0 &amp;&amp; (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_solidtop, 0, 0) || collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_physicssolid, 0, 0) || (collision_rectangle(bbox_left, (bbox_bottom + 1), bbox_right, (bbox_bottom + 1), obj_lava_water_drybones, 0, 0) &amp;&amp; (instance_exists(obj_kuribo_drybones) || (global.powerup == -38 &amp;&amp; slide == 1)))))
{
    if (vspeed &gt;= 0 &amp;&amp; (!instance_exists(obj_mario_transform2)))
    {
        statedelay = 0
        if (hspeed == 0)
            state = 0
        else
            state = 1
        yview = (y + 32)
    }
    else if (vspeed &lt; 0)
        state = 2
    if (groundpount == 1)
        groundpount = 0
    if (triple_jump != 0)
    {
        triple_count++
        if (triple_count &gt; 6)
        {
            triple_jump = 0
            triple_count = 0
        }
    }
}
else
{
    statedelay++
    if (statedelay &gt; 4)
        state = 2
}
if (groundpount == 0 &amp;&amp; disablecontrols == 2)
    disablecontrols = 0
if (groundpount == 1)
{
    vspeed = 0
    gravity = 0
}
else if (groundpount == 2)
{
    if (vspeed &gt; 6)
        vspeed = 6
}
else if (vspeed &gt; 4)
    vspeed = 4
if (keyboard_check_pressed(global.abajo) &amp;&amp; (helice_fly == 0 || helice_fly == 5) &amp;&amp; global.apariencia == 3 &amp;&amp; disablecontrols == 0 &amp;&amp; (!place_meeting(x, y, obj_bortice)) &amp;&amp; state == 2 &amp;&amp; isduck == 0 &amp;&amp; holding == 0 &amp;&amp; iamkicking == 0 &amp;&amp; global.yoshi == 0 &amp;&amp; inclown == 0 &amp;&amp; airspin != 1 &amp;&amp; groundpount == 0 &amp;&amp; walljump == 0 &amp;&amp; stompstyle == 0 &amp;&amp; doublejump == 0)
{
    image_index = 0
    groundpount = 1
    airspin = 0
    doublejump = 0
    triple_jump = 0
    triple_count = 0
    hspeed = 0
    disablecontrols = 2
    audio_play_sound(snd_NSMBU_groundpound, 0, false)
}
if (keyboard_check_pressed(global.arriba) &amp;&amp; global.apariencia == 3 &amp;&amp; disablecontrols == 2 &amp;&amp; state == 2 &amp;&amp; groundpount != 0 &amp;&amp; stompstyle == 0)
{
    if (groundpount == 1)
        groundpount_cancelled = 1
    else
    {
        sprite_index = scr_NSMBU_groundpound_canceled()
        image_speed = 0.6
        image_index = 0
        groundpount = 0
        disablecontrols = 0
    }
}
if (keyboard_check(global.lanzar_agarrar) || global.key_br == 1)
{
    if (helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5)
        hspeedmax = (1 + abs((1 * instance_number(obj_invincibility))))
    else
        hspeedmax = (3 + abs((1 * instance_number(obj_invincibility))))
}
else if (helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5)
    hspeedmax = (1 + abs((1 * instance_number(obj_invincibility))))
else
    hspeedmax = (1.3 + abs((1 * instance_number(obj_invincibility))))
if (keyboard_check_pressed(global.saltar) &amp;&amp; disablecontrols == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2)
{
    if (pmeter &gt;= 6 &amp;&amp; ((instance_exists(obj_invincibility) &amp;&amp; abs(hspeed) &gt; 3.5) || ((!instance_exists(obj_invincibility)) &amp;&amp; abs(hspeed) &gt; 2.5)) &amp;&amp; isduck == 0 &amp;&amp; holding == 0)
    {
        if (triple_jump == 3)
            triple_jump = 0
        else
            triple_jump++
        triple_count = 0
    }
    else
        triple_jump = 0
    if (triple_jump == 3)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -3.65
        else
            vspeed = -4.65
    }
    else if (abs(hspeed) &gt; 2.8)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -3.3
        else
            vspeed = -4.3
    }
    else if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -2.85
        else
            vspeed = -2.95
    }
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.95
    else
        vspeed = -4.05
    audio_play_sound(scr_jump(), 0, false)
    if (triple_jump == 2)
    {
        audio_play_sound(snd_NSMBU_triplejump_0, 0, false)
        with (instance_create(x, (y + 32), obj_smoke))
            sprite_index = spr_NSMBU_smoke_triplejump
    }
    else if (triple_jump == 3)
    {
        with (instance_create(x, (y + 32), obj_smoke))
            sprite_index = spr_NSMBU_smoke_triplejump
        audio_play_sound(choose(470, 471, 472), 0, false)
    }
    jumpnow = 1
    state = 2
}
if ((keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding &lt; 3 &amp;&amp; isduck == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2 &amp;&amp; global.powerup != -30) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; isduck == 0 &amp;&amp; global.yoshi &gt; 0 &amp;&amp; vspeed == 0 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2))
{
    triple_jump = 0
    triple_count = 0
    image_index = 0
    if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
    {
        if (global.powerup == -43)
            vspeed = -3.625
        else
            vspeed = -2.3
    }
    else if (global.powerup == -43)
        vspeed = -4.625
    else
        vspeed = -3.3
    jumpnow = 1
    state = 2
    isduck = 0
    y--
    stompstyle = 1
    audio_play_sound(scr_snd_spinjump(), 0, false)
    alarm[7] = 10
    if (global.yoshi == 2)
    {
        global.yoshi = 0
        holding = 0
        if instance_exists(obj_kuriboshoe)
        {
            with (obj_kuriboshoe)
                event_user(0)
        }
    }
    else if (global.yoshi &gt; 0)
    {
        global.yoshi = 0
        holding = 0
        if (direct &gt; 0)
            hspeed = -1.2
        else
            hspeed = 1.2
        if instance_exists(obj_yoshi2)
        {
            with (obj_yoshi2)
                event_user(1)
        }
    }
}
else if ((keyboard_check_pressed(global.saltar) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; jumpnow == 0 &amp;&amp; state &lt; 2) || (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; holding == 3 &amp;&amp; state == 2 &amp;&amp; global.yoshi &gt; 0 &amp;&amp; vspeed != 0))
{
    if (pmeter &gt;= 6 &amp;&amp; ((instance_exists(obj_invincibility) &amp;&amp; abs(hspeed) &gt; 3.5) || ((!instance_exists(obj_invincibility)) &amp;&amp; abs(hspeed) &gt; 2.5)) &amp;&amp; isduck == 0 &amp;&amp; holding == 0)
    {
        if (triple_jump == 3)
            triple_jump = 0
        else
            triple_jump++
        triple_count = 0
    }
    else
        triple_jump = 0
    if (triple_jump == 3)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -3.65
        else
            vspeed = -4.65
    }
    else if (abs(hspeed) &gt; 2.8)
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -3.3
        else
            vspeed = -4.3
    }
    else if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
    {
        if (round((hspeed / 2)) == 0)
            vspeed = -2.85
        else
            vspeed = -2.95
    }
    else if (round((hspeed / 2)) == 0)
        vspeed = -3.95
    else
        vspeed = -4.05
    audio_play_sound(scr_jump(), 0, false)
    if (triple_jump == 2)
        audio_play_sound(snd_NSMBU_triplejump_0, 0, false)
    else if (triple_jump == 3)
        audio_play_sound(choose(470, 471, 472), 0, false)
    if (state == 2)
    {
        if (global.yoshi == 2)
        {
            global.yoshi = 0
            holding = 0
            if instance_exists(obj_kuriboshoe)
            {
                with (obj_kuriboshoe)
                    event_user(0)
            }
        }
        else if (global.yoshi &gt; 0)
        {
            global.yoshi = 0
            holding = 0
            if (direct &gt; 0)
                hspeed = -1.2
            else
                hspeed = 1.2
            if instance_exists(obj_yoshi2)
            {
                with (obj_yoshi2)
                    event_user(1)
            }
        }
    }
    jumpnow = 1
    state = 2
}
if (keyboard_check_pressed(global.abajo) &amp;&amp; disablecontrols == 0 &amp;&amp; global.powerup == -38 &amp;&amp; holding == 0 &amp;&amp; pmeter &gt; 5 &amp;&amp; hspeed != 0 &amp;&amp; state &lt; 2 &amp;&amp; slide == 0)
{
    slide = 1
    image_index = 0
    hspeed += (0.5 * direct)
    audio_play_sound(snd_NSMBU_penguin_slide, 0, false)
    if (!instance_exists(obj_penguin_attack))
        instance_create((x + 5), (y + 12), obj_penguin_attack)
}
if (slide == 1 &amp;&amp; (keyboard_check_released(global.abajo) || hspeed == 0))
    slide = 2
if (slide &gt; 1)
{
    slide++
    if (slide &gt; 10)
        slide = 0
}
if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; disablecontrols == 0 &amp;&amp; global.powerup == -30 &amp;&amp; isduck == 0 &amp;&amp; holding != 3 &amp;&amp; (helice_fly == 0 || helice_fly == 2))
{
    triple_jump = 0
    triple_count = 0
    image_index = 0
    if (helice_fly == 0)
    {
        vspeed = -1
        helice_fly = 1
        fly_cap = 1
        jumpnow = 1
        state = 2
        isduck = 0
        y--
        audio_play_sound(snd_NSMBU_helice, 0, false)
        audio_play_sound(snd_NSMBU_helice_voice, 0, false)
    }
    else if (helice_fly == 2 || (helice_fly == 3 &amp;&amp; helice_fly_temp == 1))
    {
        helice_fly = 3
        audio_play_sound(snd_NSMBU_helice_down_spin, 0, false)
    }
}
if (fly_cap &gt; 0)
{
    if (fly_cap &gt; 48)
        fly_cap = 0
    else
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
        {
            if (fly_cap &gt; 36 &amp;&amp; vspeed &lt; 0)
                vspeed += 0.05
            else if (vspeed &lt; -2.8)
                vspeed = -2.8
            else
                vspeed -= 0.5
        }
        else if (fly_cap &gt; 38 &amp;&amp; vspeed &lt; 0)
            vspeed += 0.05
        else if (vspeed &lt; -3.2)
            vspeed = -3.2
        else
            vspeed -= 0.5
        fly_cap += 1
        jumpnow = 1
    }
}
if (keyboard_check(global.abajo) &amp;&amp; global.powerup == -30 &amp;&amp; ((helice_fly &gt; 1 &amp;&amp; helice_fly != 5) || (helice_fly == 1 &amp;&amp; fly_cap &gt; 15)))
{
    if (helice_fly != 4)
    {
        audio_stop_sound(snd_NSMBU_helice_drill_spin)
        audio_play_sound(snd_NSMBU_helice_drill_spin, 0, false)
    }
    if (helice_fly == 1)
    {
        vspeed = 0.5
        fly_cap = 0
    }
    helice_fly = 4
}
else if (vspeed &gt; 0.5 &amp;&amp; helice_fly == 4 &amp;&amp; global.powerup == -30)
    helice_fly = 2
if ((sprite_index == spr_NSMBU_mario_helice_fall || 3217) &amp;&amp; image_index &gt; 9 &amp;&amp; helice_fly == 2 &amp;&amp; (!audio_is_playing(snd_NSMBU_helice_planear)))
    audio_play_sound(snd_NSMBU_helice_planear, 1, true)
else if (helice_fly != 2 &amp;&amp; audio_is_playing(snd_NSMBU_helice_planear))
    audio_stop_sound(snd_NSMBU_helice_planear)
if (global.powerup == -43 &amp;&amp; sprite_index == spr_NSMBU_mario_arcon_fly_d &amp;&amp; (!audio_is_playing(snd_NSMBU_squirrel_plan)))
    audio_play_sound(snd_NSMBU_squirrel_plan, 1, true)
else if (sprite_index != spr_NSMBU_mario_arcon_fly_d &amp;&amp; sprite_index != spr_NSMBU_mario_arcon_airspin &amp;&amp; audio_is_playing(snd_NSMBU_squirrel_plan))
    audio_stop_sound(snd_NSMBU_squirrel_plan)
if (keyboard_check_pressed(global.saltar_spin) &amp;&amp; global.apariencia == 3 &amp;&amp; disablecontrols == 0 &amp;&amp; state == 2 &amp;&amp; global.yoshi == 0 &amp;&amp; airspin == 0 &amp;&amp; walljump != 1 &amp;&amp; inclown == 0 &amp;&amp; groundpount != 1 &amp;&amp; stompstyle == 0 &amp;&amp; (global.powerup != -43 || doublejump == 2 || holding == 2) &amp;&amp; (global.powerup != -30 || helice_fly == 5))
{
    if (triple_jump == 0)
        image_index = 0
    airspin = 1
    groundpount = 0
    audio_play_sound(snd_NSMBU_airspin, 0, false)
}
if ((keyboard_check_released(global.saltar) &amp;&amp; jumpnow == 1) || (keyboard_check_released(global.saltar_spin) &amp;&amp; jumpnow == 1))
    jumpnow = 2
if (isduck == 1 &amp;&amp; state != 2)
{
    if (slide == 1)
    {
        if (hspeed &gt; 0)
            hspeed -= 0.005
        if (hspeed &lt; 0)
            hspeed += 0.005
        if (abs(hspeed) &lt; 0.005)
            hspeed = 0
    }
    else if (snow == 1)
    {
        if (hspeed &gt; 0)
            hspeed -= 0.02
        if (hspeed &lt; 0)
            hspeed += 0.02
        if (abs(hspeed) &lt; 0.02)
            hspeed = 0
    }
    else
    {
        if (hspeed &gt; 0)
            hspeed -= 0.05
        if (hspeed &lt; 0)
            hspeed += 0.05
        if (abs(hspeed) &lt; 0.05)
            hspeed = 0
    }
}
else
{
    if (keyboard_check(global.derecha) &amp;&amp; (!keyboard_check(global.izquierda)) &amp;&amp; disablecontrols == 0 &amp;&amp; (walljump_ex == 0 || (walljump_ex == 1 &amp;&amp; hspeed &gt; 0)))
    {
        if ((sprite_index == spr_NSMBU_mario_arcon_fly_start || sprite_index == spr_NSMBU_mario_arcon_fly) &amp;&amp; direct == -1)
        {
            sprite_index = spr_NSMBU_mario_arcon_fly_turn
            image_index = 15
        }
        if (hspeed &lt; hspeedmax)
        {
            if (snow == 1 &amp;&amp; gravity == 0)
            {
                if (hspeed &lt; 0)
                    hspeed += 0.03
                else
                    hspeed += 0.05
            }
            else
            {
                if (hspeed &lt; 0)
                    hspeed += 0.075
                hspeed += 0.06
            }
        }
        if (walljump == 0)
            direct = 1
        direct_turn = 1
    }
    else if (keyboard_check(global.izquierda) &amp;&amp; (!keyboard_check(global.derecha)) &amp;&amp; disablecontrols == 0 &amp;&amp; (walljump_ex == 0 || (walljump_ex == 1 &amp;&amp; hspeed &lt; 0)))
    {
        if ((sprite_index == spr_NSMBU_mario_arcon_fly_start || sprite_index == spr_NSMBU_mario_arcon_fly) &amp;&amp; direct == 1)
        {
            sprite_index = spr_NSMBU_mario_arcon_fly_turn
            image_index = 0
        }
        if (hspeed &gt; (-hspeedmax))
        {
            if (snow == 1 &amp;&amp; gravity == 0)
            {
                if (hspeed &gt; 0)
                    hspeed += -0.03
                else
                    hspeed += -0.05
            }
            else
            {
                if (hspeed &gt; 0)
                    hspeed += -0.075
                hspeed += -0.06
            }
        }
        if (walljump == 0 &amp;&amp; sprite_index != spr_NSMBU_mario_arcon_fly_turn)
            direct = -1
        direct_turn = -1
    }
    else if (state != 2 || (global.powerup == -30 &amp;&amp; helice_fly &gt; 0 &amp;&amp; helice_fly &lt; 5))
    {
        if (snow == 1)
        {
            if (hspeed &gt; 0)
                hspeed -= 0.005
            else if (hspeed &lt; 0)
                hspeed += 0.005
            if (abs(hspeed) &lt; 0.005)
                hspeed = 0
        }
        else
        {
            if (hspeed &gt; 0)
                hspeed -= 0.05
            else if (hspeed &lt; 0)
                hspeed += 0.05
            if (abs(hspeed) &lt; 0.05)
                hspeed = 0
        }
    }
    if (state != 2 &amp;&amp; abs(hspeed) &gt; hspeedmax)
    {
        if (hspeed &gt; 0)
            hspeed -= 0.025
        else if (hspeed &lt; 0)
            hspeed += 0.025
        if (abs(hspeed) &lt; 0.025)
            hspeed = 0
    }
}
if (state == 2 || statedelay &gt; 0)
{
    if (pmeter &lt; 6 &amp;&amp; triple_jump != 0)
        triple_jump = 0
    if (vspeed &gt; 0 &amp;&amp; isduck == 0 &amp;&amp; groundpount == 0 &amp;&amp; walljump == 0 &amp;&amp; doublejump == 0 &amp;&amp; (helice_fly == 0 || helice_fly == 5) &amp;&amp; holding == 0 &amp;&amp; global.yoshi == 0)
    {
        if (keyboard_check(global.derecha) &amp;&amp; direct == 1)
        {
            if (collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_solid, false, true) || collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_physicssolid, false, true) || collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_bullebill_base, false, true) || collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 4), obj_onewaygate_left, false, true))
            {
                walljump = 1
                airspin = 0
                airspin_count = 0
                jump_number = 1
                triple_jump = 0
                triple_count = 0
                if (global.powerup != -43)
                    audio_play_sound(snd_NSMBU_desllizarse_walljump, 1, true)
            }
            else
            {
                walljump = 0
                arcon_slide = 0
            }
        }
        else if (keyboard_check(global.izquierda) &amp;&amp; direct == -1)
        {
            if (collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_solid, false, true) || collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_physicssolid, false, true) || collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_bullebill_base, false, true) || collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 4), obj_onewaygate_right, false, true))
            {
                walljump = 1
                airspin = 0
                airspin_count = 0
                jump_number = 1
                triple_jump = 0
                triple_count = 0
                if (global.powerup != -43)
                    audio_play_sound(snd_NSMBU_desllizarse_walljump, 1, true)
            }
            else
            {
                walljump = 0
                arcon_slide = 0
                audio_stop_sound(snd_NSMBU_desllizarse_walljump)
            }
        }
        else
        {
            walljump = 0
            arcon_slide = 0
            audio_stop_sound(snd_NSMBU_desllizarse_walljump)
        }
    }
    if (walljump == 1)
    {
        if (state &lt; 2 || isswim == 1)
            walljump = 0
        if ((direct &lt; 0 &amp;&amp; (!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_solid, false, true)) &amp;&amp; (!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_physicssolid, false, true)) &amp;&amp; (!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_bullebill_base, false, true)) &amp;&amp; (!collision_line((bbox_left - 1), (bbox_top + 4), bbox_left, (bbox_bottom - 1), obj_onewaygate_right, false, true))) || (direct &gt; 0 &amp;&amp; (!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_solid, false, true)) &amp;&amp; (!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_physicssolid, false, true)) &amp;&amp; (!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_bullebill_base, false, true)) &amp;&amp; (!collision_line(bbox_right, (bbox_top + 4), (bbox_right + 2), (bbox_bottom - 1), obj_onewaygate_left, false, true))))
        {
            walljump = 0
            if (state == 2)
                image_index = 23
            audio_stop_sound(snd_NSMBU_desllizarse_walljump)
        }
        if (stompstyle == 0)
        {
            if (global.powerup == -43 &amp;&amp; arcon_slide &lt; 120)
            {
                gravity = 0
                vspeed = 0
                arcon_slide++
            }
            else
            {
                if (global.modo_noche == 1 &amp;&amp; global.bg_level == "sky")
                {
                    gravity = 0.1
                    if (vspeed &gt; 1)
                        vspeed = 1
                }
                else
                {
                    gravity = 0.2
                    if (vspeed &gt; 1.6)
                        vspeed = 1.6
                }
                if (polvo &lt; 6)
                    polvo++
                else
                {
                    if (direct == 1)
                    {
                        with (instance_create(x, y, obj_smoke))
                            image_speed = 0.8
                    }
                    else
                    {
                        with (instance_create((x - 16), y, obj_smoke))
                            image_speed = 0.8
                    }
                    polvo = 0
                }
            }
        }
        if keyboard_check_pressed(global.saltar)
        {
            if (global.modo_noche == 1 &amp;&amp; global.bg_level == "sky")
                vspeed = -2.625
            else
                vspeed = -3.625
            jumpnow = 1
            stompstyle = 0
            image_index = 0
            walljump_ex = 1
            alarm[4] = 20
            alarm[11] = 10
            if (direct &gt; 0)
            {
                hspeed = -2.625
                walljump = 2
                direct = -1
                audio_play_sound(choose(473, 474), 1, false)
                with (instance_create(bbox_right, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = -1
                }
            }
            else if (direct &lt; 0)
            {
                hspeed = 2.625
                walljump = 2
                direct = 1
                audio_play_sound(choose(473, 474), 1, false)
                with (instance_create(bbox_left, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = 1
                }
            }
        }
        else if keyboard_check_pressed(global.saltar_spin)
        {
            if (global.modo_noche == 1 &amp;&amp; global.bg_level == "sky")
                vspeed = -2.625
            else
                vspeed = -3.625
            jumpnow = 1
            stompstyle = 1
            walljump_ex = 1
            alarm[4] = 20
            alarm[11] = 20
            if (direct &gt; 0)
            {
                hspeed = -2.625
                walljump = 2
                direct = -1
                audio_play_sound(snd_NSMBU_spinjump, 1, false)
                with (instance_create(bbox_right, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = -1
                }
            }
            else if (direct &lt; 0)
            {
                hspeed = 2.625
                walljump = 2
                direct = 1
                audio_play_sound(snd_NSMBU_spinjump, 1, false)
                with (instance_create(bbox_left, y, obj_smoke))
                {
                    sprite_index = spr_NSMBU_smoke_wall
                    direct = 1
                }
            }
        }
    }
    else
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
        {
            gravity = 0.05
            if (airspin == 1 &amp;&amp; vspeed &gt; 0)
            {
                gravity = 0.05
                if (vspeed &gt; 0.2)
                    vspeed = 0.2
            }
            else if (groundpount == 2)
            {
                if (vspeed &gt; 4)
                    vspeed = 4
            }
            else if (helice_fly &gt; 1 &amp;&amp; helice_fly &lt; 5)
            {
                switch helice_fly
                {
                    case 2:
                        if (helice_temp == 0)
                        {
                            gravity = 0.1
                            if (vspeed &gt; 0.4)
                                vspeed = 0.4
                            if (helice_cont == 9)
                                helice_temp = 1
                            else
                                helice_cont += 0.5
                        }
                        else
                        {
                            gravity = 0.1
                            if (vspeed &gt; 0.6)
                                vspeed = 0.6
                            if (helice_cont == 0)
                                helice_temp = 0
                            else
                                helice_cont -= 0.5
                        }
                        break
                    case 3:
                        gravity = 0.05
                        if (vspeed &gt; 0.4)
                            vspeed = 0.4
                        break
                    case 4:
                        gravity = 0.6
                        if (vspeed &gt; 4)
                            vspeed = 4
                        break
                }

            }
            else if (vspeed &gt; 2)
                vspeed = 2
        }
        else if (vspeed &gt; -1 || jumpnow != 1)
        {
            if (helice_fly &gt; 1 &amp;&amp; helice_fly &lt; 5)
            {
                switch helice_fly
                {
                    case 2:
                        if (helice_temp == 0)
                        {
                            gravity = 0.1
                            if (vspeed &gt; 0.8)
                                vspeed = 0.8
                            if (helice_cont == 9)
                                helice_temp = 1
                            else
                                helice_cont += 0.5
                        }
                        else
                        {
                            gravity = 0.1
                            if (vspeed &gt; 1.2)
                                vspeed = 1.2
                            if (helice_cont == 0)
                                helice_temp = 0
                            else
                                helice_cont -= 0.5
                        }
                        break
                    case 3:
                        gravity = 0.05
                        if (vspeed &gt; 0.8)
                            vspeed = 0.8
                        break
                    case 4:
                        gravity = 0.6
                        if (vspeed &gt; 6)
                            vspeed = 6
                        break
                }

            }
            else if (airspin == 1 &amp;&amp; vspeed &gt; 0)
            {
                gravity = 0.05
                if (vspeed &gt; 0.5)
                    vspeed = 0.5
            }
            else if (groundpount == 2)
                gravity = 0.6
            else
                gravity = 0.3
            if (jumpnow == 1)
                jumpnow = 2
        }
        else if (airspin == 1 &amp;&amp; vspeed &gt; 0)
        {
            gravity = 0.05
            if (vspeed &gt; 0.5)
                vspeed = 0.5
        }
        else if (groundpount == 2)
            gravity = 0.2
        else
            gravity = 0.1
        if (global.powerup == -43)
        {
            if (doublejump &gt; 0 || (keyboard_check(global.saltar) &amp;&amp; vspeed &gt; 0 &amp;&amp; (holding == 0 || holding == 2) &amp;&amp; stompstyle == 0 &amp;&amp; airspin == 0 &amp;&amp; isduck == 0 &amp;&amp; groundpount == 0 &amp;&amp; walljump == 0))
            {
                gravity /= 2
                if (vspeed &gt; 0.8)
                    vspeed = 0.8
                triple_jump = 0
                triple_count = 0
            }
        }
    }
}
if (global.powerup == -43 &amp;&amp; keyboard_check_pressed(global.saltar_spin) &amp;&amp; (!instance_exists(obj_kuribo_drybones)) &amp;&amp; groundpount == 0 &amp;&amp; doublejump == 0 &amp;&amp; holding == 0 &amp;&amp; stompstyle == 0 &amp;&amp; airspin == 0 &amp;&amp; walljump == 0 &amp;&amp; holding != 3 &amp;&amp; isduck == 0)
{
    doublejump = 1
    audio_play_sound(snd_NSMBU_squirrel_imp, 0, false)
    with (instance_create(x, (y + 32), obj_smoke))
    {
        sprite_index = spr_smoke_doublejump
        direct = other.direct
        image_speed = 0.5
    }
    squirrel_fly = 1
    vspeed = 0
    hspeed = (1 * direct)
    image_index = 0
}
if (squirrel_fly &gt; 0)
{
    if (squirrel_fly &gt; 8)
        squirrel_fly = 0
    else
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
        {
            if (squirrel_fly &gt; 3 &amp;&amp; vspeed &lt; 0)
                vspeed += 0.15
            else if (vspeed &lt; -2.4)
                vspeed = -2.4
            else
                vspeed -= 1
        }
        else if (squirrel_fly &gt; 4 &amp;&amp; vspeed &lt; 0)
            vspeed += 0.05
        else if (vspeed &lt; -3)
            vspeed = -3
        else
            vspeed -= 1
        squirrel_fly += 1
        jumpnow = 1
    }
}
climb1 = collision_rectangle(bbox_left, bbox_top, bbox_right, bbox_bottom, obj_climb, 0, 0)
if (climb1 &amp;&amp; (((y + 19) &gt; climb1.y &amp;&amp; climb1.object_index == obj_vine_green &amp;&amp; climb1.image_index == 0) || climb1.object_index != obj_vine_green || climb1.image_index != 0) &amp;&amp; global.yoshi == 0 &amp;&amp; isduck == 0 &amp;&amp; (keyboard_check(global.arriba) || (keyboard_check(global.abajo) &amp;&amp; state == 2)) &amp;&amp; holding == 0 &amp;&amp; disablecontrols == 0)
{
    audio_stop_sound(snd_NSMBU_get_vine)
    audio_play_sound(snd_NSMBU_get_vine, 0, false)
    state = 3
    gravity = 0
    speed = 0
    event_user(15)
    event_user(14)
    fly_cap = 0
    walljump = 0
    airspin = 0
    groundpount = 0
    triple_jump = 0
    triple_count = 0
}
if (stompstyle == 1)
{
    if (state != 2)
        stompstyle = 0
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (state != 3)
{
    if (keyboard_check(global.saltar) || keyboard_check(global.saltar_spin))
        jumpnow = 1
    else
        jumpnow = 2
    state = 2
    yview = (y + 32)
    camera_jump = 1
    alarm[0] = 4
    airspin = 0
    airspin_count = 0
    if (pmeter &gt;= 6 &amp;&amp; abs(hspeed) &gt; (2.5 * (1 + instance_number(obj_invincibility))) &amp;&amp; isduck == 0 &amp;&amp; holding == 0 &amp;&amp; stompstyle == 0)
    {
        if (triple_jump == 3)
            triple_jump = 0
        else
            triple_jump++
        triple_count = 0
    }
    else
        triple_jump = 0
    if (triple_jump == 2)
    {
        audio_play_sound(snd_NSMBU_triplejump_0, 0, false)
        triple_number = 33
    }
    else if (triple_jump == 3)
    {
        audio_play_sound(choose(470, 471, 472), 0, false)
        triple_number = 35
    }
    if ((!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_physicssolid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 1), bbox_right, bbox_top, obj_onewaygate_bottom, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_solid, 1, 0)) &amp;&amp; (!collision_rectangle(bbox_left, (bbox_top - 4), bbox_right, bbox_top, obj_bullebill_base, 1, 0)))
    {
        if (global.bg_level == "sky" &amp;&amp; global.modo_noche == 1)
            vspeed = -2.675
        else
            vspeed = (-(4.225 - (2.55 * isswim)))
        y--
    }
    if (stompstyle == 1)
        alarm[7] = 5
    if (sprite_index == scr_NSMBU_jump1() || sprite_index == scr_NSMBU_jump2() || sprite_index == scr_NSMBU_jump3() || holding == 2)
        image_index = 0
    airspin = 0
    airspin_count = 0
    groundpount = 0
    doublejump = 0
    walljump = 0
    if (helice_fly &gt; 0)
        helice_fly = 5
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
